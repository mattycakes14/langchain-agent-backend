2025-08-12 15:47:18,354 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-12 15:47:18,354 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-12 15:47:18,419 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-12 15:47:35,712 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-5b418b06-40c8-4711-afaf-37a88cbb908c', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000223E58DBA60>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Conerts in Los Angeles', 'role': 'user'}], 'model': 'gpt-4o-mini', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-12 15:47:35,781 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-12 15:47:35,781 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-12 15:47:35,888 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000223E59213D0>
2025-08-12 15:47:35,889 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000223E52A53D0> server_hostname='openrouter.ai' timeout=None
2025-08-12 15:47:35,907 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000223E5920FB0>
2025-08-12 15:47:35,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 15:47:35,908 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 15:47:35,908 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 15:47:35,908 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 15:47:35,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 15:47:36,691 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 22:47:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e383ee1ad8ed35-SJC')])
2025-08-12 15:47:36,692 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-12 15:47:36,692 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 15:47:36,775 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 15:47:36,775 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 15:47:36,775 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 15:47:36,775 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Tue, 12 Aug 2025 22:47:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96e383ee1ad8ed35-SJC'})
2025-08-12 15:47:36,776 - openai._base_client - DEBUG - request_id: None
2025-08-12 15:47:36,785 - llm_agent - INFO - Classified message: get_concerts
2025-08-12 15:47:36,789 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-3b9132a6-84b6-48de-8896-9225583fc6da', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000223E586AB60>, 'json_data': {'messages': [{'content': 'Extract event preferences from concert queries.\n            Look for: location, music genres, time preferences (tonight, this weekend), \n            and price preferences (cheap, expensive, free).', 'role': 'system'}, {'content': 'Extract parameters from this query: Conerts in Los Angeles', 'role': 'user'}], 'model': 'gpt-4o-mini', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'location': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted location from the query', 'title': 'Location'}, 'genre': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted music genre or event type', 'title': 'Genre'}, 'mood': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted mood or vibe preference', 'title': 'Mood'}, 'artist': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted artist or band name', 'title': 'Artist'}, 'timeframe': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted time preference (tonight, tomorrow, this weekend, etc.)', 'title': 'Timeframe'}, 'price_range': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted price preference (cheap, expensive, budget, luxury)', 'title': 'Price Range'}, 'cuisine': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted food cuisine type', 'title': 'Cuisine'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['location', 'genre', 'mood', 'artist', 'timeframe', 'price_range', 'cuisine']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-12 15:47:36,790 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-12 15:47:36,790 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 15:47:36,791 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 15:47:36,791 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 15:47:36,791 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 15:47:36,791 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 15:47:39,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 22:47:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e383f398deed35-SJC')])
2025-08-12 15:47:39,408 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-12 15:47:39,409 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 15:47:39,858 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 15:47:39,858 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 15:47:39,858 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 15:47:39,858 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Tue, 12 Aug 2025 22:47:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96e383f398deed35-SJC'})
2025-08-12 15:47:39,859 - openai._base_client - DEBUG - request_id: None
2025-08-12 15:47:40,301 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-e76be24e-7017-4d8e-b163-befcbe83db10', 'json_data': {'messages': [{'content': 'You are a SoCal ABG. INCLUDE ALL DETAILS OF THE RESPONSE', 'role': 'system'}, {'content': 'Conerts in Los Angeles', 'role': 'user'}], 'model': 'gpt-4o-mini', 'stream': False}}
2025-08-12 15:47:40,302 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-12 15:47:40,302 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 15:47:40,303 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 15:47:40,303 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 15:47:40,303 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 15:47:40,303 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 15:47:41,193 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 22:47:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e384098cbaed35-SJC')])
2025-08-12 15:47:41,195 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-12 15:47:41,195 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 15:47:55,956 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 15:47:55,956 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 15:47:55,957 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 15:47:55,957 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Tue, 12 Aug 2025 22:47:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96e384098cbaed35-SJC'})
2025-08-12 15:47:55,957 - openai._base_client - DEBUG - request_id: None
2025-08-12 16:05:00,997 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-12 16:05:00,997 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-12 16:05:01,905 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-12 16:36:48,899 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-70f71cfe-cf65-48f4-a078-2901a3174d9f', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001999FAEF9C0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'What is some popular house songs', 'role': 'user'}], 'model': 'gpt-4o-mini', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-12 16:36:49,080 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-12 16:36:49,081 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-12 16:36:49,131 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001999F91C980>
2025-08-12 16:36:49,131 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001999F4B53D0> server_hostname='openrouter.ai' timeout=None
2025-08-12 16:36:49,167 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001999F91C9E0>
2025-08-12 16:36:49,168 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 16:36:49,168 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 16:36:49,168 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 16:36:49,169 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 16:36:49,169 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 16:36:49,846 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 23:36:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e3cc081eb55c22-SJC')])
2025-08-12 16:36:49,847 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-12 16:36:49,850 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 16:36:50,176 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 16:36:50,177 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 16:36:50,177 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 16:36:50,178 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Tue, 12 Aug 2025 23:36:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96e3cc081eb55c22-SJC'})
2025-08-12 16:36:50,178 - openai._base_client - DEBUG - request_id: None
2025-08-12 16:36:50,194 - llm_agent - INFO - Classified message: song_rec
2025-08-12 16:36:50,197 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-eade635a-b8c4-4789-9f8d-dfd012da22c3', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001999FAEF9C0>, 'json_data': {'messages': [{'content': 'Extract music preferences from song recommendation queries.\n            Look for: genres (k-pop, pop, hip hop, rock, etc.), moods (upbeat, chill, energetic), \n            artists (BTS, Taylor Swift, etc.), and similar artists mentioned.', 'role': 'system'}, {'content': 'Extract parameters from this query: What is some popular house songs', 'role': 'user'}], 'model': 'gpt-4o-mini', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'location': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted location from the query', 'title': 'Location'}, 'genre': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted music genre or event type', 'title': 'Genre'}, 'mood': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted mood or vibe preference', 'title': 'Mood'}, 'artist': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted artist or band name', 'title': 'Artist'}, 'timeframe': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted time preference (tonight, tomorrow, this weekend, etc.)', 'title': 'Timeframe'}, 'price_range': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted price preference (cheap, expensive, budget, luxury)', 'title': 'Price Range'}, 'cuisine': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted food cuisine type', 'title': 'Cuisine'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['location', 'genre', 'mood', 'artist', 'timeframe', 'price_range', 'cuisine']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-12 16:36:50,198 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-12 16:36:50,199 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 16:36:50,199 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 16:36:50,199 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 16:36:50,200 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 16:36:50,200 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 16:36:50,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 23:36:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e3cc0e8e425c22-SJC')])
2025-08-12 16:36:50,725 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-12 16:36:50,725 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 16:36:51,381 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 16:36:51,381 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 16:36:51,382 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 16:36:51,382 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Tue, 12 Aug 2025 23:36:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96e3cc0e8e425c22-SJC'})
2025-08-12 16:36:51,382 - openai._base_client - DEBUG - request_id: None
2025-08-12 16:36:51,620 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'idempotency_key': 'stainless-python-retry-10db27be-9c33-4acc-a791-c1ed560b3a81', 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001999FAEE0C0>, 'json_data': {'input': 'What is some popular house songs', 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2025-08-12 16:36:51,621 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2025-08-12 16:36:51,621 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-12 16:36:51,652 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001999FBBCE60>
2025-08-12 16:36:51,653 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001999FAF49D0> server_hostname='api.openai.com' timeout=5.0
2025-08-12 16:36:51,671 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001999FA7D940>
2025-08-12 16:36:51,671 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 16:36:51,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 16:36:51,672 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 16:36:51,673 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 16:36:51,673 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 16:36:52,568 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 23:36:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-ada-002-v2'), (b'openai-organization', b'chatbot-3yyzxk'), (b'openai-processing-ms', b'76'), (b'openai-project', b'proj_WqWbEC8ZFq40CblzZneNjf5G'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-7d9c6b8bbd-fg6jq'), (b'x-envoy-upstream-service-time', b'480'), (b'x-ratelimit-limit-requests', b'3000'), (b'x-ratelimit-limit-tokens', b'1000000'), (b'x-ratelimit-remaining-requests', b'2999'), (b'x-ratelimit-remaining-tokens', b'999992'), (b'x-ratelimit-reset-requests', b'20ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_f72c6eb2f3fa4e42b8123fdbfc42fe4b'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=c3n8gsSFG7oWphJHwxsHrOkoo1Pt2KpOr55SF8KnsCA-1755041812033-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e3cc17bfe0d035-SJC'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-12 16:36:52,569 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-08-12 16:36:52,569 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 16:36:52,570 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 16:36:52,570 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 16:36:52,570 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 16:36:52,570 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Tue, 12 Aug 2025 23:36:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002-v2', 'openai-organization': 'chatbot-3yyzxk', 'openai-processing-ms': '76', 'openai-project': 'proj_WqWbEC8ZFq40CblzZneNjf5G', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'via': 'envoy-router-7d9c6b8bbd-fg6jq', 'x-envoy-upstream-service-time': '480', 'x-ratelimit-limit-requests': '3000', 'x-ratelimit-limit-tokens': '1000000', 'x-ratelimit-remaining-requests': '2999', 'x-ratelimit-remaining-tokens': '999992', 'x-ratelimit-reset-requests': '20ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f72c6eb2f3fa4e42b8123fdbfc42fe4b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'set-cookie': '_cfuvid=c3n8gsSFG7oWphJHwxsHrOkoo1Pt2KpOr55SF8KnsCA-1755041812033-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'cf-ray': '96e3cc17bfe0d035-SJC', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-12 16:36:52,570 - openai._base_client - DEBUG - request_id: req_f72c6eb2f3fa4e42b8123fdbfc42fe4b
2025-08-12 16:36:55,044 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-149d2664-78d8-402d-b839-d8051914bb5f', 'json_data': {'messages': [{'content': 'You are a SoCal ABG. INCLUDE ALL DETAILS OF THE RESPONSE', 'role': 'system'}, {'content': 'What is some popular house songs', 'role': 'user'}], 'model': 'gpt-4o-mini', 'stream': False}}
2025-08-12 16:36:55,045 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-12 16:36:55,046 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-12 16:36:55,046 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-12 16:36:55,046 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-12 16:36:55,046 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-12 16:36:55,047 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-12 16:36:55,477 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 12 Aug 2025 23:36:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96e3cc2ccab65c22-SJC')])
2025-08-12 16:36:55,478 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-12 16:36:55,478 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-12 16:37:02,892 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-12 16:37:02,892 - httpcore.http11 - DEBUG - response_closed.started
2025-08-12 16:37:02,892 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-12 16:37:02,892 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Tue, 12 Aug 2025 23:36:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96e3cc2ccab65c22-SJC'})
2025-08-12 16:37:02,893 - openai._base_client - DEBUG - request_id: None
2025-08-12 16:37:02,894 - root - INFO - {'messages': [HumanMessage(content='What is some popular house songs', additional_kwargs={}, response_metadata={}, id='d34b3d00-690a-4970-b938-9598002fbaf2')], 'message_type': 'song_rec', 'result': {'llm_response': AIMessage(content='As of my last update in October 2023, some popular house songs that have made waves in the music scene include:\n\n1. **"Cola" by CamelPhat & Elderbrook** - This track is a staple in house music, known for its deep bass and catchy vocals.\n\n2. **"Losing It" by Fisher** - An infectious track that gained massive popularity in clubs and festivals, featuring a memorable drop.\n\n3. **"Deep End" by John Summit** - This song showcases a groovy beat and uplifting vibes, making it a favorite for summer playlists.\n\n4. **"Turn Down for What" by DJ Snake & Lil Jon** (remixes) - While originally more of a hip-hop anthem, numerous house remixes have made it a club favorite.\n\n5. **"Your Love" by Frankie Knuckles** - A classic house track that has stood the test of time and continues to be remixed and celebrated.\n\n6. **"Body" by Megan Thee Stallion (Paul Woolford Remix)** - This remix turned a hip-hop hit into a dance-floor banger with its house-infused beats.\n\n7. **"Praise You" by Fatboy Slim** - Another classic that\'s been remixed many times; its iconic sample and feel-good vibes keep it relevant.\n\n8. **"Higher Ground" by Martin Garrix & John Martin** - This collaboration features a anthemic chorus and is a crowd-pleaser during live sets.\n\n9. **"Free" by Felix Da Housecat** - An edgier track that brings a mix of techno and house with captivating vocals.\n\n10. **"Look Right Through" (MK Remix) by Storm Queen** - This remix brought renewed life to the original track and became a house anthem.\n\nThese tracks showcase a mix of classic and contemporary house music, reflecting the genre\'s evolution and continuous appeal in the dance music scene. Whether you\'re heading to a festival, club, or just vibing at home, these songs are sure to get you moving!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 413, 'prompt_tokens': 31, 'total_tokens': 444, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': 0, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}}, 'model_name': 'openai/gpt-4o-mini', 'system_fingerprint': 'fp_d77b305a29', 'id': 'gen-1755041814-VrpfDsa2H0Po91Bmi65j', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--b5f5cc7e-ba59-41b6-be28-50fffb592eeb-0', usage_metadata={'input_tokens': 31, 'output_tokens': 413, 'total_tokens': 444, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 0}})}, 'extracted_params': {'genre': 'house'}}
2025-08-12 17:02:09,818 - httpcore.connection - DEBUG - close.started
2025-08-12 17:02:09,818 - httpcore.connection - DEBUG - close.complete
2025-08-13 12:44:08,733 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:44:08,735 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:44:09,273 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:44:24,876 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2e933d93-6071-4000-84c8-bf558c9e6a41', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000011D907DBC40>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'What is the weather in Cupertino', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 12:44:24,941 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:44:24,942 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 12:44:24,958 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000011D908213A0>
2025-08-13 12:44:24,958 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000011D901A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 12:44:24,971 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000011D90820F50>
2025-08-13 12:44:24,972 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:44:24,972 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:44:24,972 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:44:24,973 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:44:24,973 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:44:26,045 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:44:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eab4fc1c3717c4-SJC')])
2025-08-13 12:44:26,047 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:44:26,050 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:44:26,153 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:44:26,154 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:44:26,154 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:44:26,154 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:44:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eab4fc1c3717c4-SJC'})
2025-08-13 12:44:26,155 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:44:26,166 - llm_agent - INFO - Classified message: get_weather
2025-08-13 12:44:26,168 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-62eae772-d03e-4114-9693-319108a16874', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000011D907D9440>, 'json_data': {'messages': [{'content': 'Exctract the longitude and latitude from the user query (i.e. "weather in San Diego" -> lat: 32.7157, lon: -117.1611)', 'role': 'system'}, {'content': 'Extract parameters from this query: What is the weather in Cupertino', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'preferred_country': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted preferred country from the query', 'title': 'Preferred Country'}, 'song_rec_description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted song description from the query', 'title': 'Song Rec Description'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'preferred_country', 'song_rec_description']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 12:44:26,169 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:44:26,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:44:26,170 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:44:26,170 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:44:26,171 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:44:26,171 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:44:26,547 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:44:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eab5039fe317c4-SJC')])
2025-08-13 12:44:26,548 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:44:26,548 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:44:26,811 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:44:26,811 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:44:26,811 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:44:26,812 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:44:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eab5039fe317c4-SJC'})
2025-08-13 12:44:26,812 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:44:26,819 - root - INFO - {'messages': [HumanMessage(content='What is the weather in Cupertino', additional_kwargs={}, response_metadata={}, id='3ea4c38b-97fe-4e15-a1db-c07759f845e3')], 'message_type': 'get_weather', 'result': None, 'extracted_params': {'lat': 37.323, 'lon': -122.0322, 'genres': None, 'preferred_country': None, 'song_rec_description': None}}
2025-08-13 12:45:59,799 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-f911d90d-788f-46cf-932e-4c2f58f6561e', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000011D907DBD80>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 12:45:59,800 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:45:59,800 - httpcore.connection - DEBUG - close.started
2025-08-13 12:45:59,803 - httpcore.connection - DEBUG - close.complete
2025-08-13 12:45:59,804 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 12:45:59,813 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000011D905AC2F0>
2025-08-13 12:45:59,813 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000011D901A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 12:45:59,827 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000011D8EE11A60>
2025-08-13 12:45:59,827 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:45:59,828 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:45:59,828 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:45:59,828 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:45:59,828 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:46:00,402 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:46:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eab74cf85215f5-SJC')])
2025-08-13 12:46:00,402 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:46:00,403 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:46:00,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:46:00,506 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:46:00,506 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:46:00,507 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:46:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eab74cf85215f5-SJC'})
2025-08-13 12:46:00,507 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:46:00,509 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 12:46:00,512 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-ffc03fd4-918f-4b86-b7fd-35e129297825', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000011D907DBC40>, 'json_data': {'messages': [{'content': 'Extract user query concert details (i.e. "EDM concert" -> genres: EDM)', 'role': 'system'}, {'content': 'Extract parameters from this query: Where are the best rave, house concerts?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'preferred_country': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted preferred country from the query', 'title': 'Preferred Country'}, 'song_rec_description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted song description from the query', 'title': 'Song Rec Description'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'preferred_country', 'song_rec_description']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 12:46:00,512 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:46:00,513 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:46:00,513 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:46:00,514 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:46:00,514 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:46:00,514 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:46:00,929 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:46:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eab7513ca415f5-SJC'), (b'Content-Encoding', b'gzip')])
2025-08-13 12:46:00,930 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:46:00,930 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:46:01,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:46:01,290 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:46:01,291 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:46:01,291 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:46:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eab7513ca415f5-SJC', 'content-encoding': 'gzip'})
2025-08-13 12:46:01,291 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:46:01,295 - root - INFO - {'messages': [HumanMessage(content='Where are the best rave, house concerts?', additional_kwargs={}, response_metadata={}, id='34747543-1e41-4e3d-8e4d-d1202be15fca')], 'message_type': 'get_concerts', 'result': None, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['rave', 'house'], 'preferred_country': None, 'song_rec_description': None}}
2025-08-13 12:47:45,307 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:47:45,307 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:47:45,347 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:48:44,871 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:48:44,871 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:48:44,910 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:48:56,549 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:48:56,549 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:48:56,602 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:49:07,185 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:49:07,186 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:49:07,234 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:49:35,898 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:49:35,898 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:49:35,944 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:50:33,453 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:50:33,453 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:50:33,502 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:50:38,210 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:50:38,211 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:50:38,266 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:51:04,244 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2e4de458-0b1e-4cce-ab72-68d69e99891b', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000294280DBB00>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 12:51:04,312 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:51:04,313 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 12:51:04,342 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000294281051C0>
2025-08-13 12:51:04,343 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000029426AA53D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 12:51:04,366 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000294280E0500>
2025-08-13 12:51:04,367 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:51:04,367 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:51:04,367 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:51:04,368 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:51:04,368 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:51:04,825 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:51:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eabebc6aba3385-LAX')])
2025-08-13 12:51:04,826 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:51:04,826 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:51:04,966 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:51:04,967 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:51:04,967 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:51:04,968 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:51:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eabebc6aba3385-LAX'})
2025-08-13 12:51:04,968 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:51:04,978 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 12:51:04,980 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-3e52db18-e244-417e-9af8-d62870a65228', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000294280D9440>, 'json_data': {'messages': [{'content': 'Extract user query concert details (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': 'Extract parameters from this query: Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}, 'song_rec_description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted song description from the query', 'title': 'Song Rec Description'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code', 'song_rec_description']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 12:51:04,981 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:51:04,981 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:51:04,981 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:51:04,981 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:51:04,981 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:51:04,982 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:51:05,717 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:51:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eabec03cd23385-LAX')])
2025-08-13 12:51:05,718 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:51:05,718 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:51:06,237 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:51:06,238 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:51:06,238 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:51:06,238 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:51:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eabec03cd23385-LAX'})
2025-08-13 12:51:06,239 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:51:06,249 - root - INFO - {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='9e064752-d2d3-4b1c-9063-8152be2d3b11')], 'message_type': 'get_concerts', 'result': None, 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': None, 'song_rec_description': None}}
2025-08-13 12:52:01,543 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:52:01,543 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:52:01,588 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:52:25,134 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:52:25,134 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:52:25,184 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:53:09,204 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-8d91ebd0-fce7-4f73-8e82-82afe2e72608', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000021135EDBB00>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 12:53:09,304 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:53:09,304 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 12:53:09,316 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000211370052E0>
2025-08-13 12:53:09,316 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000211358A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 12:53:09,351 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021135CAEB40>
2025-08-13 12:53:09,352 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:53:09,352 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:53:09,352 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:53:09,352 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:53:09,354 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:53:10,051 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:53:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eac1c98bca102e-LAX')])
2025-08-13 12:53:10,051 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:53:10,051 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:53:10,289 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:53:10,289 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:53:10,289 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:53:10,290 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:53:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eac1c98bca102e-LAX'})
2025-08-13 12:53:10,290 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:53:10,301 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 12:53:10,304 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-6bf498c4-ab30-461b-bcf8-dfcba5247e27', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000021135ED9440>, 'json_data': {'messages': [{'content': 'Extract user query concert details (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': 'Extract parameters from this query: Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 12:53:10,304 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 12:53:10,304 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 12:53:10,305 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 12:53:10,305 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 12:53:10,305 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 12:53:10,305 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 12:53:10,771 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 19:53:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eac1cf7a1f102e-LAX')])
2025-08-13 12:53:10,771 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 12:53:10,771 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 12:53:11,443 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 12:53:11,443 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 12:53:11,443 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 12:53:11,443 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 19:53:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eac1cf7a1f102e-LAX'})
2025-08-13 12:53:11,444 - openai._base_client - DEBUG - request_id: None
2025-08-13 12:53:11,451 - root - INFO - {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='9e719bd9-0b47-46ff-be64-5d2d4c5b82d1')], 'message_type': 'get_concerts', 'result': None, 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 12:55:18,165 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:55:18,165 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:55:18,226 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:55:40,408 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:55:40,409 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:55:40,459 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:56:30,658 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:56:30,658 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:56:30,708 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 12:59:31,029 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 12:59:31,029 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 12:59:31,080 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 13:01:38,271 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-67388442-4acf-4600-a352-ac3ec44adedf', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000257C68D9300>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 13:01:38,445 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 13:01:38,446 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 13:01:38,470 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000257C68FCE30>
2025-08-13 13:01:38,471 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000257C62A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 13:01:38,493 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000257C68FCB30>
2025-08-13 13:01:38,493 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 13:01:38,494 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 13:01:38,494 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 13:01:38,494 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 13:01:38,494 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 13:01:38,939 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 20:01:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eace37ab32cba2-LAX')])
2025-08-13 13:01:38,941 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 13:01:38,941 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 13:01:39,050 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 13:01:39,050 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 13:01:39,051 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 13:01:39,051 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 20:01:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eace37ab32cba2-LAX'})
2025-08-13 13:01:39,051 - openai._base_client - DEBUG - request_id: None
2025-08-13 13:01:39,062 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 13:01:39,065 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-38209977-ecb0-4a8e-9761-4b2ce4b38435', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000257C68D9300>, 'json_data': {'messages': [{'content': 'Extract user query concert details (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': 'Extract parameters from this query: Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 13:01:39,065 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 13:01:39,066 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 13:01:39,066 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 13:01:39,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 13:01:39,067 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 13:01:39,067 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 13:01:39,551 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 20:01:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eace3b4c79cba2-LAX')])
2025-08-13 13:01:39,551 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 13:01:39,551 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 13:01:40,251 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 13:01:40,253 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 13:01:40,253 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 13:01:40,253 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 20:01:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eace3b4c79cba2-LAX'})
2025-08-13 13:01:40,253 - openai._base_client - DEBUG - request_id: None
2025-08-13 13:01:40,261 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='1d8f6bd7-147b-4d08-b15e-67894511a54a')], 'message_type': 'get_concerts', 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 14:28:45,115 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:28:45,115 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:28:46,294 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:30:28,326 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-faafd764-084f-4cbc-b5ed-c5efcc9c0509', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001F523DD93A0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:30:28,539 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:30:28,539 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:30:28,579 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F523DFCDD0>
2025-08-13 14:30:28,588 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F5237A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:30:28,621 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F523B46F30>
2025-08-13 14:30:28,621 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:30:28,626 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:30:28,626 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:30:28,626 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:30:28,626 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:30:29,132 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:30:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb50590cd2f037-SJC')])
2025-08-13 14:30:29,132 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:30:29,138 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:30:29,263 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:30:29,263 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:30:29,263 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:30:29,263 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:30:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb50590cd2f037-SJC'})
2025-08-13 14:30:29,263 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:30:29,291 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:30:29,297 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-19d33111-bb6c-4090-9cab-d54b01958db2', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001F523DD93A0>, 'json_data': {'messages': [{'content': 'Extract user query concert details (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='16cb030e-848f-420e-8144-e18e3bf9201d'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:30:29,301 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:30:29,301 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:30:29,301 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:30:29,301 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:30:29,301 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:30:29,301 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:30:29,646 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:30:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb505d4a33f037-SJC')])
2025-08-13 14:30:29,648 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:30:29,648 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:30:30,011 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:30:30,011 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:30:30,011 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:30:30,015 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:30:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb505d4a33f037-SJC'})
2025-08-13 14:30:30,015 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:30:30,031 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='16cb030e-848f-420e-8144-e18e3bf9201d')], 'message_type': 'get_concerts', 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': None}}
2025-08-13 14:31:18,031 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:31:18,031 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:31:18,089 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:31:24,955 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:31:24,955 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:31:25,014 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:31:39,140 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:31:39,143 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:31:39,194 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:31:43,181 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:31:43,181 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:31:43,238 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:31:50,060 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-b6d9e382-27c2-4636-930a-8722df4d1add', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001AEC08D94E0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:31:50,157 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:31:50,159 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:31:50,176 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001AEC08FD040>
2025-08-13 14:31:50,176 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001AEC02A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:31:50,201 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001AEC08FCD40>
2025-08-13 14:31:50,201 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:31:50,209 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:31:50,209 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:31:50,209 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:31:50,209 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:31:50,702 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:31:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb5256ea52ed41-SJC')])
2025-08-13 14:31:50,702 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:31:50,702 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:31:50,859 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:31:50,859 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:31:50,859 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:31:50,859 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:31:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb5256ea52ed41-SJC'})
2025-08-13 14:31:50,859 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:31:50,876 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:31:50,884 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-0e93007f-f5b0-4b54-bb48-ddc528c1a5da', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001AEC08D94E0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='fbc267eb-1e4a-4edc-aa01-4ff218d40bfc'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:31:50,884 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:31:50,884 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:31:50,889 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:31:50,889 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:31:50,889 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:31:50,889 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:31:51,304 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:31:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb525b2ebeed41-SJC')])
2025-08-13 14:31:51,304 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:31:51,304 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:31:51,566 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:31:51,566 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:31:51,566 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:31:51,566 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:31:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb525b2ebeed41-SJC'})
2025-08-13 14:31:51,566 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:31:51,582 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='fbc267eb-1e4a-4edc-aa01-4ff218d40bfc')], 'message_type': 'get_concerts', 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 14:32:27,918 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:32:27,918 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:32:27,970 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:33:35,310 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:33:35,310 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:33:35,357 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:35:11,706 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:35:11,706 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:35:11,764 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:36:09,627 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:36:09,642 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:36:09,704 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:46:32,660 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:46:32,660 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:46:32,712 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:50:43,645 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-69bb51fb-4e85-48ac-8bf9-ece5a24a3c62', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001E7C4CED4E0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:50:43,846 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:50:43,846 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:50:43,897 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001E7C4D0DAC0>
2025-08-13 14:50:43,897 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001E7C46B5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:50:43,933 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001E7C4B20B60>
2025-08-13 14:50:43,933 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:50:43,933 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:50:43,933 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:50:43,936 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:50:43,936 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:50:44,439 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:50:44 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb6e04bd37ed41-SJC')])
2025-08-13 14:50:44,445 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:50:44,447 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:50:44,544 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:50:44,544 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:50:44,544 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:50:44,544 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:50:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb6e04bd37ed41-SJC'})
2025-08-13 14:50:44,544 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:50:44,561 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:50:44,564 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-898e1fe1-7d2d-46f0-a2dc-fcebcaf8ceb3', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001E7C4CED4E0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='c7e34a18-d32e-4d43-bd86-58d97c62f18e'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:50:44,564 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:50:44,564 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:50:44,566 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:50:44,566 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:50:44,566 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:50:44,566 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:50:45,072 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:50:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb6e08a8e4ed41-SJC')])
2025-08-13 14:50:45,080 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:50:45,081 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:50:45,343 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:50:45,343 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:50:45,343 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:50:45,343 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:50:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb6e08a8e4ed41-SJC'})
2025-08-13 14:50:45,343 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:50:45,663 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='c7e34a18-d32e-4d43-bd86-58d97c62f18e')], 'message_type': 'get_concerts', 'result': {'events': []}, 'extracted_params': {}}
2025-08-13 14:52:17,980 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:52:17,980 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:52:18,059 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:52:22,605 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:52:22,608 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:52:22,681 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:52:27,316 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-27b2fcd9-8d4a-460b-8c5a-e165a2b4ec76', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001793D2D9580>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:52:27,396 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:52:27,396 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:52:27,402 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001793D2FD2B0>
2025-08-13 14:52:27,402 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001793BCA9450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:52:27,434 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001793BE54E30>
2025-08-13 14:52:27,434 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:52:27,434 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:52:27,434 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:52:27,434 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:52:27,434 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:52:28,320 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:52:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb708bae4af99f-SJC')])
2025-08-13 14:52:28,322 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:52:28,322 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:52:28,563 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:52:28,563 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:52:28,563 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:52:28,563 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:52:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb708bae4af99f-SJC'})
2025-08-13 14:52:28,565 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:52:28,584 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:52:28,590 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-6d06d464-fb23-4c62-abcf-45164737b242', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001793D2D9580>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='43005464-84c5-4e68-8e75-f35b66ed6d9d'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:52:28,592 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:52:28,592 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:52:28,592 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:52:28,592 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:52:28,595 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:52:28,595 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:52:29,022 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:52:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb7092dde4f99f-SJC')])
2025-08-13 14:52:29,022 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:52:29,022 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:52:29,175 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:52:29,175 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:52:29,175 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:52:29,175 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:52:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb7092dde4f99f-SJC'})
2025-08-13 14:52:29,175 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:52:29,423 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='43005464-84c5-4e68-8e75-f35b66ed6d9d')], 'message_type': 'get_concerts', 'result': {'events': []}, 'extracted_params': {}}
2025-08-13 14:52:47,675 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:52:47,675 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:52:47,726 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:52:48,094 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-038591d9-570a-4217-a9db-a74cad10e74b', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000025004CD94E0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:52:48,289 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:52:48,289 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:52:48,307 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025004CFD190>
2025-08-13 14:52:48,307 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000250046A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:52:48,340 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025004B10B60>
2025-08-13 14:52:48,340 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:52:48,340 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:52:48,340 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:52:48,346 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:52:48,346 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:52:50,375 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:52:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb710e4ddcfaa2-SJC')])
2025-08-13 14:52:50,375 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:52:50,375 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:52:50,508 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:52:50,510 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:52:50,510 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:52:50,510 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:52:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb710e4ddcfaa2-SJC'})
2025-08-13 14:52:50,512 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:52:50,525 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:52:50,531 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-4ddc1e2f-9fca-4806-b56c-ec8b4975ce11', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000025004CD94E0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='05ca231d-b3a0-4961-b99d-3240f2284402'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:52:50,531 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:52:50,531 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:52:50,531 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:52:50,531 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:52:50,531 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:52:50,531 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:52:51,448 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:52:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb711bfcc2faa2-SJC')])
2025-08-13 14:52:51,448 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:52:51,448 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:52:52,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:52:52,475 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:52:52,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:52:52,475 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:52:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb711bfcc2faa2-SJC'})
2025-08-13 14:52:52,475 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:52:52,775 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='05ca231d-b3a0-4961-b99d-3240f2284402')], 'message_type': 'get_concerts', 'result': {'error': "Error searching events: name 'genres' is not defined"}, 'extracted_params': {}}
2025-08-13 14:53:22,790 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:53:22,792 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:53:22,850 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:53:22,981 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2c99c3e5-fd30-44e4-8da7-6df5f341ebbe', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001ABADAD94E0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:53:23,047 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:53:23,047 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:53:23,071 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001ABADAFCF80>
2025-08-13 14:53:23,071 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001ABAD4A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:53:23,114 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001ABADAFCD10>
2025-08-13 14:53:23,114 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:53:23,114 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:53:23,114 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:53:23,114 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:53:23,114 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:53:23,701 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:53:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb71e7eccafa66-SJC')])
2025-08-13 14:53:23,701 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:53:23,701 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:53:23,824 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:53:23,824 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:53:23,824 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:53:23,824 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:53:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb71e7eccafa66-SJC'})
2025-08-13 14:53:23,824 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:53:23,847 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:53:23,847 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-9e8843f7-0a7e-42d0-95ea-10ed977d650b', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001ABADAD94E0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='dbb58335-046e-47bf-a66f-d1f6fbe76aae'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:53:23,847 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:53:23,854 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:53:23,856 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:53:23,856 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:53:23,856 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:53:23,856 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:53:24,285 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:53:24 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb71ec3f50fa66-SJC')])
2025-08-13 14:53:24,285 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:53:24,285 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:53:24,635 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:53:24,637 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:53:24,637 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:53:24,637 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:53:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb71ec3f50fa66-SJC'})
2025-08-13 14:53:24,637 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:53:25,067 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='dbb58335-046e-47bf-a66f-d1f6fbe76aae')], 'message_type': 'get_concerts', 'result': {'error': "Error searching events: name 'genres' is not defined"}, 'extracted_params': {}}
2025-08-13 14:53:40,755 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:53:40,755 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:53:40,807 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:53:40,938 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-1187417d-914f-47ad-9070-4cef664669cd', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002049A8D94E0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:53:41,007 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:53:41,007 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:53:41,021 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002049A8FD0D0>
2025-08-13 14:53:41,021 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002049A2A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:53:41,040 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002049A710B60>
2025-08-13 14:53:41,040 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:53:41,040 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:53:41,040 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:53:41,053 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:53:41,053 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:53:41,539 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:53:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb7257b875ebf3-SJC')])
2025-08-13 14:53:41,542 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:53:41,542 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:53:41,653 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:53:41,653 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:53:41,653 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:53:41,653 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:53:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb7257b875ebf3-SJC'})
2025-08-13 14:53:41,659 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:53:41,675 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:53:41,684 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-f8257182-9675-48b7-ab32-aca3a49c5cfd', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002049A8D94E0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='53688d9b-1bf7-4604-8fd2-538b1d541bbf'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:53:41,684 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:53:41,684 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:53:41,684 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:53:41,684 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:53:41,688 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:53:41,688 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:53:42,101 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:53:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb725bbe40ebf3-SJC')])
2025-08-13 14:53:42,104 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:53:42,104 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:53:42,347 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:53:42,347 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:53:42,347 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:53:42,347 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:53:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb725bbe40ebf3-SJC'})
2025-08-13 14:53:42,347 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:53:42,686 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='53688d9b-1bf7-4604-8fd2-538b1d541bbf')], 'message_type': 'get_concerts', 'result': {'error': "Error searching events: name 'genres' is not defined"}, 'extracted_params': {}}
2025-08-13 14:55:19,809 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:55:19,809 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:55:19,866 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:55:31,589 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:55:31,589 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:55:31,647 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:55:31,768 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-04a1c937-15b6-49ec-a3e1-1f0d74f8f53c', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000019F395D93A0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:55:31,833 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:55:31,833 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:55:31,841 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000019F395FCD40>
2025-08-13 14:55:31,841 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000019F37FA5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:55:31,874 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000019F395FCB60>
2025-08-13 14:55:31,874 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:55:31,874 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:55:31,874 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:55:31,874 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:55:31,874 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:55:32,466 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:55:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb750c6f7b15d0-SJC')])
2025-08-13 14:55:32,466 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:55:32,468 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:55:32,618 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:55:32,626 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:55:32,626 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:55:32,626 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:55:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb750c6f7b15d0-SJC'})
2025-08-13 14:55:32,626 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:55:32,642 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:55:32,642 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-9113d150-0ad1-4504-bca7-ed1c7b0af3f9', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000019F395D93A0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='c87c5e67-0fb5-450f-ac36-8dbdae75897f'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:55:32,642 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:55:32,642 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:55:32,650 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:55:32,650 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:55:32,650 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:55:32,650 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:55:33,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:55:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb75113cef15d0-SJC')])
2025-08-13 14:55:33,020 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:55:33,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:55:33,390 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:55:33,390 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:55:33,390 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:55:33,390 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:55:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb75113cef15d0-SJC'})
2025-08-13 14:55:33,390 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:55:33,406 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='c87c5e67-0fb5-450f-ac36-8dbdae75897f')], 'message_type': 'get_concerts', 'extracted_params': {}}
2025-08-13 14:56:47,669 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:56:47,669 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:56:47,732 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:57:05,178 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:57:05,178 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:57:05,230 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:57:05,378 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2dade728-cadd-4c3a-b0ca-4bba9f80eda2', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000209256D9440>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 14:57:05,450 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:57:05,451 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 14:57:05,485 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000209256FCE30>
2025-08-13 14:57:05,485 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000209250A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 14:57:05,516 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000209256FCB00>
2025-08-13 14:57:05,516 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:57:05,516 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:57:05,518 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:57:05,518 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:57:05,519 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:57:06,112 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:57:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb7755a99667cb-SJC')])
2025-08-13 14:57:06,112 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:57:06,112 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:57:06,254 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:57:06,254 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:57:06,254 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:57:06,254 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:57:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb7755a99667cb-SJC'})
2025-08-13 14:57:06,254 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:57:06,270 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 14:57:06,270 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-185ce642-5193-450e-a0cf-7e033195aa5b', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000209256D9440>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='a630c95d-4c0c-4e9f-b23f-0b8baab849e2'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 14:57:06,277 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 14:57:06,278 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 14:57:06,278 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 14:57:06,278 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 14:57:06,278 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 14:57:06,280 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 14:57:06,785 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 21:57:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb775a6e2367cb-SJC')])
2025-08-13 14:57:06,785 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 14:57:06,785 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 14:57:06,933 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 14:57:06,933 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 14:57:06,933 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 14:57:06,941 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 21:57:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb775a6e2367cb-SJC'})
2025-08-13 14:57:06,941 - openai._base_client - DEBUG - request_id: None
2025-08-13 14:57:06,949 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='a630c95d-4c0c-4e9f-b23f-0b8baab849e2')], 'message_type': 'get_concerts', 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90024'}}
2025-08-13 14:57:50,059 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:57:50,059 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:57:50,137 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:58:57,275 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:58:57,277 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:58:57,329 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 14:59:50,243 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 14:59:50,243 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 14:59:50,293 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:00:14,312 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:00:14,312 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:00:14,355 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:00:24,519 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-031e373b-6352-43e6-bb99-a826d71064f3', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001E6210D9580>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:00:24,612 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:00:24,612 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:00:24,638 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001E6210FD070>
2025-08-13 15:00:24,644 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001E61FAA5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:00:24,674 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001E61FF10B60>
2025-08-13 15:00:24,674 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:00:24,676 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:00:24,676 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:00:24,676 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:00:24,676 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:00:25,387 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:00:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb7c326a54fa36-SJC')])
2025-08-13 15:00:25,387 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:00:25,387 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:00:25,583 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:00:25,583 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:00:25,583 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:00:25,583 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:00:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb7c326a54fa36-SJC'})
2025-08-13 15:00:25,583 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:00:25,591 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:00:25,602 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2897a62c-df32-411f-95d7-f8c776d8da73', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001E6210D9580>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='8e15e6c5-f875-4419-9805-23d20829d172'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:00:25,602 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:00:25,603 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:00:25,603 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:00:25,603 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:00:25,603 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:00:25,603 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:00:26,449 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:00:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb7c382a62fa36-SJC')])
2025-08-13 15:00:26,451 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:00:26,451 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:00:26,614 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:00:26,618 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:00:26,618 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:00:26,618 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:00:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb7c382a62fa36-SJC'})
2025-08-13 15:00:26,619 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:00:31,672 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='8e15e6c5-f875-4419-9805-23d20829d172')], 'message_type': 'get_concerts', 'result': {'error': "Error searching events: name 'genres' is not defined"}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['rave', 'house'], 'postal_code': None}}
2025-08-13 15:04:24,363 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:04:24,364 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:04:24,411 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:04:45,160 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:04:45,160 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:04:45,242 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:04:49,382 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:04:49,390 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:04:49,441 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:05:34,822 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:05:34,822 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:05:34,875 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:05:44,470 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:05:44,470 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:05:44,527 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:05:57,528 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-4bde4316-27be-4c38-a0d7-6a94a03f6633', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002C5C2AD9620>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:05:57,623 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:05:57,623 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:05:57,668 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002C5C2AFD040>
2025-08-13 15:05:57,668 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002C5C24A53D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:05:57,697 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002C5C2845F10>
2025-08-13 15:05:57,697 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:05:57,697 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:05:57,697 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:05:57,705 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:05:57,705 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:05:58,197 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:05:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb8453dbc1cefe-SJC')])
2025-08-13 15:05:58,197 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:05:58,197 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:05:58,296 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:05:58,296 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:05:58,296 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:05:58,296 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:05:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb8453dbc1cefe-SJC'})
2025-08-13 15:05:58,296 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:05:58,312 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:05:58,322 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-80ba89e7-bd77-4b0d-bd3c-d8e77be8214d', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002C5C0847240>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='483b697a-8366-426d-96d1-21963faf9ac5'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:05:58,324 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:05:58,324 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:05:58,326 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:05:58,326 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:05:58,326 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:05:58,326 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:05:58,780 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:05:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb8457b838cefe-SJC')])
2025-08-13 15:05:58,780 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:05:58,780 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:05:58,936 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:05:58,936 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:05:58,936 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:05:58,939 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:05:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb8457b838cefe-SJC'})
2025-08-13 15:05:58,939 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:06:06,440 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='483b697a-8366-426d-96d1-21963faf9ac5')], 'message_type': 'get_concerts', 'result': {'error': "Error searching events: name 'query' is not defined"}, 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 15:09:25,090 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:09:25,090 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:09:25,148 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:09:29,266 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-e1d31f9d-fef2-47f8-807e-1568e5935c2c', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000253B25B5800>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:09:29,354 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:09:29,354 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:09:29,375 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000253B6D0CF20>
2025-08-13 15:09:29,375 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000253B66B53D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:09:29,411 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000253B6D0CB30>
2025-08-13 15:09:29,411 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:09:29,411 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:09:29,411 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:09:29,411 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:09:29,417 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:09:29,788 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:09:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb897f0cceed3c-SJC')])
2025-08-13 15:09:29,790 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:09:29,790 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:09:29,911 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:09:29,911 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:09:29,911 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:09:29,911 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:09:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb897f0cceed3c-SJC'})
2025-08-13 15:09:29,911 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:09:29,927 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:09:29,927 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-1a968a6f-3f7a-4a60-ad87-f9999e27629c', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000253B25B5800>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='0d24370c-f849-4fed-8155-29072ce42763'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:09:29,927 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:09:29,935 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:09:29,935 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:09:29,935 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:09:29,935 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:09:29,935 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:09:30,349 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:09:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb89824f86ed3c-SJC')])
2025-08-13 15:09:30,349 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:09:30,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:09:30,503 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:09:30,503 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:09:30,503 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:09:30,503 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:09:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb89824f86ed3c-SJC'})
2025-08-13 15:09:30,503 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:09:30,773 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='0d24370c-f849-4fed-8155-29072ce42763')], 'message_type': 'get_concerts', 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 15:10:50,390 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:10:50,392 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:10:50,447 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:10:50,608 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-9d2b9313-b33a-42a3-b300-228d5a60085f', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000022E1C9D5440>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:10:50,675 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:10:50,675 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:10:50,692 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022E1C9FD010>
2025-08-13 15:10:50,692 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000022E1C3A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:10:50,727 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022E1C93E000>
2025-08-13 15:10:50,728 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:10:50,728 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:10:50,728 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:10:50,730 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:10:50,730 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:10:51,342 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:10:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb8b7b3e36ce5c-SJC')])
2025-08-13 15:10:51,342 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:10:51,342 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:10:51,433 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:10:51,433 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:10:51,441 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:10:51,441 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:10:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb8b7b3e36ce5c-SJC'})
2025-08-13 15:10:51,441 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:10:51,449 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:10:51,458 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-1c1e1856-0ebb-48a6-8fe8-ddc009516722', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000022E1A7BFF60>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='01d98252-e046-487a-86d5-0bceefedf0d5'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:10:51,458 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:10:51,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:10:51,462 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:10:51,462 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:10:51,462 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:10:51,462 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:10:52,014 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:10:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb8b7fcb00ce5c-SJC')])
2025-08-13 15:10:52,014 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:10:52,014 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:10:52,299 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:10:52,299 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:10:52,299 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:10:52,299 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:10:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb8b7fcb00ce5c-SJC'})
2025-08-13 15:10:52,299 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:10:52,307 - root - INFO - Searching for events
2025-08-13 15:10:52,553 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='01d98252-e046-487a-86d5-0bceefedf0d5')], 'message_type': 'get_concerts', 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 15:11:27,707 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:11:27,707 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:11:27,759 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:11:33,109 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:11:33,109 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:11:33,165 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:13:18,829 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-7318e382-3860-422b-8179-0e4e456da7b2', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000022370F6AD40>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:13:19,049 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:13:19,049 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:13:19,089 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022370FFD310>
2025-08-13 15:13:19,095 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000223709A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:13:19,122 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022370FFCB30>
2025-08-13 15:13:19,122 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:13:19,122 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:13:19,122 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:13:19,122 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:13:19,122 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:13:19,696 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:13:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb8f1abb486896-SJC')])
2025-08-13 15:13:19,698 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:13:19,698 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:13:19,805 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:13:19,805 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:13:19,805 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:13:19,805 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:13:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb8f1abb486896-SJC'})
2025-08-13 15:13:19,805 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:13:19,837 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:13:19,845 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-6d8d44be-a76c-40c1-a1ac-e029ac8bc72a', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000022370F6AD40>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='bbeabea1-29ba-483d-a67f-bae90ec0db37'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:13:19,845 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:13:19,845 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:13:19,845 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:13:19,845 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:13:19,845 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:13:19,845 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:13:20,348 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:13:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb8f1f38546896-SJC')])
2025-08-13 15:13:20,348 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:13:20,356 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:13:20,433 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:13:20,433 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:13:20,433 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:13:20,436 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:13:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb8f1f38546896-SJC'})
2025-08-13 15:13:20,436 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:13:20,449 - root - INFO - Searching for events
2025-08-13 15:13:20,979 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='bbeabea1-29ba-483d-a67f-bae90ec0db37')], 'message_type': 'get_concerts', 'result': {'events': {'_embedded': {'events': [{'name': 'HOL!', 'type': 'event', 'id': 'rZ7HnEZ1AKxK-f', 'test': False, 'url': 'https://www.ticketweb.com/event/hol-nova-sd-tickets/13893854', 'locale': 'en-us', 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': False}, {'ratio': '3_2', 'url': 'https://i.ticketweb.com/i/00/12/65/25/94_Edp.jpg?v=6', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': False}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_SOURCE', 'width': 2426, 'height': 1365, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': False}], 'sales': {'public': {'startDateTime': '2025-07-17T19:00:00Z', 'startTBD': False, 'startTBA': False, 'endDateTime': '2025-08-24T08:30:00Z'}}, 'dates': {'access': {'startDateTime': '2025-08-24T05:00:00Z', 'startApproximate': False, 'endApproximate': False}, 'start': {'localDate': '2025-08-23', 'localTime': '22:00:00', 'dateTime': '2025-08-24T05:00:00Z', 'dateTBD': False, 'dateTBA': False, 'timeTBA': False, 'noSpecificTime': False}, 'end': {'approximate': False, 'noSpecificTime': False}, 'timezone': 'America/Los_Angeles', 'status': {'code': 'onsale'}, 'spanMultipleDays': False}, 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vaal', 'name': 'Dubstep'}, 'type': {'id': 'KZAyXgnZfZ7v7nI', 'name': 'Undefined'}, 'subType': {'id': 'KZFzBErXgnZfZ7v7lJ', 'name': 'Undefined'}, 'family': False}], 'promoter': {'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}, 'promoters': [{'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}], 'info': 'Ages 21+**PLEASE NOTE** Tickets are currently being held and will be released 3 days before your event. If you still havent received your tickets 24 hours before the event please contact info@ticketweb.comNOVA SD IS A CASHLESS VENUEACCEPTED FORMS OF PAYMENTCredit/debit cards, Apple/Google/Samsung Pay.BOTTLE SERVICEPlease use the reservations inquiry form HERE.KITCHENPlease view our food menu HERE.ENTRY/DRESS CODEAges 21+. All sales are final.Please visit our FAQ page HERE.STUBHUB / VIVID SEATS / OTHER THIRD-PARTY RESELLERSNova SD has NO association with StubHub, Vivid Seats, or any third-party resellers. Tickets purchased from these sites will not be valid for entry. Any tickets purchased from a third party will not give the buyer access to the ticket and its benefits. The only acceptable tickets for entry may be purchased through TicketWeb and, in some cases, TIXR.Your government-issued ID must match the name on the ticket.', 'pleaseNote': 'This event is 21 and over. Any ticket holder unable to present valid identification indicating that they are at least 21 years of age will not be admitted to this event, and will not be eligible for a refund. PLEASE NOTE: A valid and physical form of identification indicating that they are at least 21 years old must be presented. NOVA SD is a cashless venue. Accepted forms of payment: credit/debit cards, Apple/Google/Samsung Pay.', 'priceRanges': [{'type': 'standard', 'currency': 'USD', 'min': 19.95, 'max': 19.95}], '_links': {'self': {'href': '/discovery/v2/events/rZ7HnEZ1AKxK-f?locale=en-us'}, 'attractions': [{'href': '/discovery/v2/attractions/K8vZ917QfY7?locale=en-us'}], 'venues': [{'href': '/discovery/v2/venues/rZ7HnEZ17f6Fg?locale=en-us'}]}, '_embedded': {'venues': [{'name': 'Nova SD', 'type': 'venue', 'id': 'rZ7HnEZ17f6Fg', 'test': False, 'url': 'https://www.ticketweb.com/venue/nova-sd-san-diego-ca/507235', 'locale': 'en-us', 'postalCode': '92101', 'timezone': 'America/Los_Angeles', 'city': {'name': 'San Diego'}, 'state': {'name': 'California', 'stateCode': 'CA'}, 'country': {'name': 'United States Of America', 'countryCode': 'US'}, 'address': {'line1': '454 Sixth Ave'}, 'location': {'longitude': '-117.1616597', 'latitude': '32.7101458'}, 'upcomingEvents': {'ticketweb': 19, '_total': 19, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/venues/rZ7HnEZ17f6Fg?locale=en-us'}}}], 'attractions': [{'name': 'HOL!', 'type': 'attraction', 'id': 'K8vZ917QfY7', 'test': False, 'url': 'https://www.ticketmaster.com/hol-tickets/artist/2873097', 'locale': 'en-us', 'externalLinks': {'musicbrainz': [{'id': 'b65e57f6-9bd4-4bd5-9088-4b844788ba00', 'url': 'https://musicbrainz.org/artist/b65e57f6-9bd4-4bd5-9088-4b844788ba00'}]}, 'images': [{'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RETINA_PORTRAIT_3_2.jpg', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': False}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_SOURCE', 'width': 2426, 'height': 1365, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': False}], 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vAt1', 'name': 'Techno'}, 'type': {'id': 'KZAyXgnZfZ7v7la', 'name': 'Individual'}, 'subType': {'id': 'KZFzBErXgnZfZ7vAd7', 'name': 'Musician'}, 'family': False}], 'upcomingEvents': {'ticketmaster': 1, 'ticketweb': 1, '_total': 2, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/attractions/K8vZ917QfY7?locale=en-us'}}}]}}, {'name': 'Jason Ross', 'type': 'event', 'id': 'rZ7HnEZ1AK04e7', 'test': False, 'url': 'https://www.ticketweb.com/event/jason-ross-bloom-tickets/13915084', 'locale': 'en-us', 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': False}, {'ratio': '3_2', 'url': 'https://i.ticketweb.com/i/00/12/67/37/94_Edp.jpg?v=6', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_SOURCE', 'width': 2426, 'height': 1365, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': False}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': False}], 'sales': {'public': {'startDateTime': '2025-07-28T19:00:00Z', 'startTBD': False, 'startTBA': False, 'endDateTime': '2025-09-20T08:30:00Z'}}, 'dates': {'access': {'startDateTime': '2025-09-20T05:00:00Z', 'startApproximate': False, 'endApproximate': False}, 'start': {'localDate': '2025-09-19', 'localTime': '22:00:00', 'dateTime': '2025-09-20T05:00:00Z', 'dateTBD': False, 'dateTBA': False, 'timeTBA': False, 'noSpecificTime': False}, 'end': {'approximate': False, 'noSpecificTime': False}, 'timezone': 'America/Los_Angeles', 'status': {'code': 'onsale'}, 'spanMultipleDays': False}, 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vAtt', 'name': 'Trance'}, 'type': {'id': 'KZAyXgnZfZ7v7nI', 'name': 'Undefined'}, 'subType': {'id': 'KZFzBErXgnZfZ7v7lJ', 'name': 'Undefined'}, 'family': False}], 'promoter': {'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}, 'promoters': [{'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}], 'info': '**PLEASE NOTE** Tickets are currently being held and will be released 3 days before your event. If you still havent received your tickets 48 hours before the event please contact info@ticketweb.comBLOOM IS A CASHLESS VENUE-ACCEPTED FORMS OF PAYMENT - Credit/debit cards, Apple/Google/Samsung Pay.TABLE SERVICE-Please use the reservations inquiry form at https://bloomdtsd.comENTRY/DRESS CODE- Ages 21+. All sales are final. STUBHUB/VIVID SEATS/THIRD-PARTY RESELLERS-Bloom has NO association with StubHub, Vivid Seats or any third-party resellers. Tickets purchased from these sites will not be valid for entry. Any tickets purchased from a third party will not give the buyer access to the ticket & its benefits. Acceptable tickets for entry may be purchased through TicketWeb & in some cases TIXR. Your government-issued ID must match the name on the ticket.', 'pleaseNote': 'This event is 21 and over. Any ticket holder unable to present valid identification indicating that they are at least 21 years of age will not be admitted to this event, and will not be eligible for a refund. PLEASE NOTE: A valid and physical form of identification indicating that they are at least 21 years old must be presented. BLOOM is a cashless venue. Accepted forms of payment: credit/debit cards, Apple/Google/Samsung Pay.', 'priceRanges': [{'type': 'standard', 'currency': 'USD', 'min': 24.95, 'max': 24.95}], '_links': {'self': {'href': '/discovery/v2/events/rZ7HnEZ1AK04e7?locale=en-us'}, 'attractions': [{'href': '/discovery/v2/attractions/K8vZ917faj7?locale=en-us'}], 'venues': [{'href': '/discovery/v2/venues/rZ7HnEZ17_8ZS?locale=en-us'}]}, '_embedded': {'venues': [{'name': 'Bloom', 'type': 'venue', 'id': 'rZ7HnEZ17_8ZS', 'test': False, 'url': 'https://www.ticketweb.com/venue/bloom-san-diego-ca/650033', 'locale': 'en-us', 'postalCode': '92101', 'timezone': 'America/Los_Angeles', 'city': {'name': 'San Diego'}, 'state': {'name': 'California', 'stateCode': 'CA'}, 'country': {'name': 'United States Of America', 'countryCode': 'US'}, 'address': {'line1': 'Suite 100 - 919 Fourth Ave'}, 'location': {'longitude': '-117.160780', 'latitude': '32.714980'}, 'upcomingEvents': {'ticketweb': 19, '_total': 19, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/venues/rZ7HnEZ17_8ZS?locale=en-us'}}}], 'attractions': [{'name': 'Jason Ross', 'type': 'attraction', 'id': 'K8vZ917faj7', 'test': False, 'url': 'https://www.ticketmaster.com/jason-ross-tickets/artist/2184195', 'locale': 'en-us', 'externalLinks': {'youtube': [{'url': 'https://www.youtube.com/c/JasonRossOfc'}], 'twitter': [{'url': 'https://twitter.com/jasonrossofc'}], 'facebook': [{'url': 'https://www.facebook.com/JasonRossOfficial'}], 'musicbrainz': [{'id': '1eef0e12-6c2d-406b-9b3e-1ff50edd9d0c', 'url': 'https://musicbrainz.org/artist/1eef0e12-6c2d-406b-9b3e-1ff50edd9d0c'}], 'instagram': [{'url': 'https://www.instagram.com/jasonrossofficial/'}], 'homepage': [{'url': 'http://www.jasonrossofficial.com/'}]}, 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_SOURCE', 'width': 2426, 'height': 1365, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': False}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RETINA_PORTRAIT_3_2.jpg', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': False}], 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vAtk', 'name': 'Progressive House'}, 'type': {'id': 'KZAyXgnZfZ7v7la', 'name': 'Individual'}, 'subType': {'id': 'KZFzBErXgnZfZ7vAd7', 'name': 'Musician'}, 'family': False}], 'upcomingEvents': {'ticketweb': 2, '_total': 2, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/attractions/K8vZ917faj7?locale=en-us'}}}]}}, {'name': 'Roddy Lima', 'type': 'event', 'id': 'rZ7HnEZ1AfozQK', 'test': False, 'url': 'https://www.ticketweb.com/event/roddy-lima-the-basement-at-club-vinyl-tickets/14478693', 'locale': 'en-us', 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': True}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': True}, {'ratio': '3_2', 'url': 'https://i.ticketweb.com/i/00/13/10/78/33_Edp.jpg?v=10', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': True}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': True}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': True}], 'sales': {'public': {'startDateTime': '2025-06-13T17:00:00Z', 'startTBD': False, 'startTBA': False, 'endDateTime': '2025-08-16T08:00:00Z'}}, 'dates': {'access': {'startDateTime': '2025-08-16T04:00:00Z', 'startApproximate': False, 'endApproximate': False}, 'start': {'localDate': '2025-08-15', 'localTime': '22:00:00', 'dateTime': '2025-08-16T04:00:00Z', 'dateTBD': False, 'dateTBA': False, 'timeTBA': False, 'noSpecificTime': False}, 'end': {'approximate': False, 'noSpecificTime': False}, 'timezone': 'America/Denver', 'status': {'code': 'onsale'}, 'spanMultipleDays': False}, 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vAtI', 'name': 'Techno-House'}, 'type': {'id': 'KZAyXgnZfZ7v7nI', 'name': 'Undefined'}, 'subType': {'id': 'KZFzBErXgnZfZ7v7lJ', 'name': 'Undefined'}, 'family': False}], 'promoter': {'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}, 'promoters': [{'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}], 'info': '**PLEASE NOTE** Tickets are currently being held and will be released 3 days before your event. If you still havent received your tickets 48 hours before the event please contact info@ticketweb.com TABLE SERVICEPlease email https://vinylnightclub.com/vip ENTRY/DRESS CODEAges 21+. All sales are final.Please visit our FAQ page:https://vinylnightclub.com/faq/ STUBHUB / VIVID SEATS / OTHER THIRD-PARTY RESELLERSThe Basement at Club Vinyl has NO association with StubHub, Vivid Seats, or any third-party resellers. Tickets purchased from these sites will not be valid for entry. Any tickets purchased from a third party will not give the buyer access to the ticket and its benefits. The only acceptable tickets for entry may be purchased through TicketWeb and, in some cases, TIXR.Your government-issued ID must match the name on the ticket.', 'pleaseNote': 'This event is 21 and over. Any ticket holder unable to present valid identification indicating that they are at least 21 years of age will not be admitted to this event, and will not be eligible for a refund.', 'priceRanges': [{'type': 'standard', 'currency': 'USD', 'min': 24.95, 'max': 24.95}], '_links': {'self': {'href': '/discovery/v2/events/rZ7HnEZ1AfozQK?locale=en-us'}, 'venues': [{'href': '/discovery/v2/venues/rZ7HnEZ17QA4S?locale=en-us'}]}, '_embedded': {'venues': [{'name': 'The Basement at Club Vinyl', 'type': 'venue', 'id': 'rZ7HnEZ17QA4S', 'test': False, 'url': 'https://www.ticketweb.com/venue/the-basement-at-club-vinyl-denver-co/685573', 'locale': 'en-us', 'postalCode': '80203', 'timezone': 'America/Denver', 'city': {'name': 'Denver'}, 'state': {'name': 'Colorado', 'stateCode': 'CO'}, 'country': {'name': 'United States Of America', 'countryCode': 'US'}, 'address': {'line1': '1082 Broadway'}, 'location': {'longitude': '-104.987060', 'latitude': '39.733550'}, 'upcomingEvents': {'ticketweb': 20, '_total': 20, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/venues/rZ7HnEZ17QA4S?locale=en-us'}}}]}}, {'name': 'Biscits', 'type': 'event', 'id': 'rZ7HnEZ1AKQeZ7', 'test': False, 'url': 'https://www.ticketweb.com/event/biscits-time-nightclub-tickets/13682004', 'locale': 'en-us', 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': False}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RETINA_PORTRAIT_3_2.jpg', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_SOURCE', 'width': 2426, 'height': 1365, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': False}], 'sales': {'public': {'startDateTime': '2025-02-03T20:00:00Z', 'startTBD': False, 'startTBA': False, 'endDateTime': '2025-08-23T08:30:00Z'}}, 'dates': {'access': {'startDateTime': '2025-08-23T05:00:00Z', 'startApproximate': False, 'endApproximate': False}, 'start': {'localDate': '2025-08-22', 'localTime': '22:00:00', 'dateTime': '2025-08-23T05:00:00Z', 'dateTBD': False, 'dateTBA': False, 'timeTBA': False, 'noSpecificTime': False}, 'end': {'approximate': False, 'noSpecificTime': False}, 'timezone': 'America/Los_Angeles', 'status': {'code': 'onsale'}, 'spanMultipleDays': False}, 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vAtI', 'name': 'Techno-House'}, 'type': {'id': 'KZAyXgnZfZ7v7nI', 'name': 'Undefined'}, 'subType': {'id': 'KZFzBErXgnZfZ7v7lJ', 'name': 'Undefined'}, 'family': False}], 'info': 'Ages 21+**PLEASE NOTE** Tickets are currently being held and will be released 3 days before your event. If you still havent received your tickets 48 hours before the event please contact info@ticketweb.comTIME NIGHTCLUB IS A CASHLESS VENUEACCEPTED FORMS OF PAYMENTCredit/debit cards, Apple/Google/Samsung Pay.TABLE SERVICEPlease use the reservations inquiry form HEREENTRY/DRESS CODEAges 21+. All sales are final.Please visit our FAQ page HERE.STUBHUB / VIVID SEATS / OTHER THIRD-PARTY RESELLERSTime Nightclub has NO association with StubHub, Vivid Seats, or any third-party resellers. Tickets purchased from these sites will not be valid for entry. Any tickets purchased from a third party will not give the buyer access to the ticket and its benefits. The only acceptable tickets for entry may be purchased through TicketWeb and, in some cases, TIXR. Your government-issued ID must match the name on the ticket.', 'pleaseNote': 'This event is 21 and over. Any ticket holder unable to present valid identification indicating that they are at least 21 years of age will not be admitted to this event, and will not be eligible for a refund. PLEASE NOTE: A valid and physical form of identification indicating that they are at least 21 years old must be presented. TIME Nightclub is a cashless venue. Accepted forms of payment: credit/debit cards, Apple/Google/Samsung Pay.', 'priceRanges': [{'type': 'standard', 'currency': 'USD', 'min': 34.95, 'max': 34.95}], '_links': {'self': {'href': '/discovery/v2/events/rZ7HnEZ1AKQeZ7?locale=en-us'}, 'attractions': [{'href': '/discovery/v2/attractions/K8vZ917Q7aV?locale=en-us'}], 'venues': [{'href': '/discovery/v2/venues/rZ7HnEZ17f6_P?locale=en-us'}]}, '_embedded': {'venues': [{'name': 'Time Nightclub', 'type': 'venue', 'id': 'rZ7HnEZ17f6_P', 'test': False, 'url': 'https://www.ticketweb.com/venue/time-nightclub-costa-mesa-ca/507665', 'locale': 'en-us', 'postalCode': '92627', 'timezone': 'America/Los_Angeles', 'city': {'name': 'Costa Mesa'}, 'state': {'name': 'California', 'stateCode': 'CA'}, 'country': {'name': 'United States Of America', 'countryCode': 'US'}, 'address': {'line1': '1875 Newport Blvd. Suite B245'}, 'location': {'longitude': '-117.917640', 'latitude': '33.642450'}, 'upcomingEvents': {'ticketweb': 15, '_total': 15, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/venues/rZ7HnEZ17f6_P?locale=en-us'}}}], 'attractions': [{'name': 'Biscits', 'type': 'attraction', 'id': 'K8vZ917Q7aV', 'test': False, 'url': 'https://www.ticketmaster.com/biscits-tickets/artist/2857735', 'locale': 'en-us', 'externalLinks': {'musicbrainz': [{'id': 'a996a131-7975-4a94-a99f-d4912e0bd427', 'url': 'https://musicbrainz.org/artist/a996a131-7975-4a94-a99f-d4912e0bd427'}]}, 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': False}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_SOURCE', 'width': 2426, 'height': 1365, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_RETINA_PORTRAIT_3_2.jpg', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': False}], 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vA1E', 'name': 'Dance/Electronic'}, 'type': {'id': 'KZAyXgnZfZ7v7la', 'name': 'Individual'}, 'subType': {'id': 'KZFzBErXgnZfZ7vAd7', 'name': 'Musician'}, 'family': False}], 'upcomingEvents': {'universe': 1, 'ticketweb': 2, 'ticketmaster': 1, '_total': 4, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/attractions/K8vZ917Q7aV?locale=en-us'}}}]}}, {'name': 'Pegassi', 'type': 'event', 'id': 'rZ7HnEZ1AK0VC7', 'test': False, 'url': 'https://www.ticketweb.com/event/pegassi-the-basement-at-club-vinyl-tickets/13934384', 'locale': 'en-us', 'images': [{'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RECOMENDATION_16_9.jpg', 'width': 100, 'height': 56, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_EVENT_DETAIL_PAGE_16_9.jpg', 'width': 205, 'height': 115, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_16_9.jpg', 'width': 640, 'height': 360, 'fallback': True}, {'ratio': '4_3', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_CUSTOM.jpg', 'width': 305, 'height': 225, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_TABLET_LANDSCAPE_16_9.jpg', 'width': 1024, 'height': 576, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_TABLET_LANDSCAPE_LARGE_16_9.jpg', 'width': 2048, 'height': 1152, 'fallback': True}, {'ratio': '16_9', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_LANDSCAPE_16_9.jpg', 'width': 1136, 'height': 639, 'fallback': True}, {'ratio': '3_2', 'url': 'https://i.ticketweb.com/i/00/12/69/21/14_Edp.jpg?v=6', 'width': 640, 'height': 427, 'fallback': False}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_TABLET_LANDSCAPE_3_2.jpg', 'width': 1024, 'height': 683, 'fallback': True}, {'ratio': '3_2', 'url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_ARTIST_PAGE_3_2.jpg', 'width': 305, 'height': 203, 'fallback': True}], 'sales': {'public': {'startDateTime': '2025-08-06T18:00:00Z', 'startTBD': False, 'startTBA': False, 'endDateTime': '2025-09-06T08:00:00Z'}}, 'dates': {'access': {'startDateTime': '2025-09-06T04:00:00Z', 'startApproximate': False, 'endApproximate': False}, 'start': {'localDate': '2025-09-05', 'localTime': '22:00:00', 'dateTime': '2025-09-06T04:00:00Z', 'dateTBD': False, 'dateTBA': False, 'timeTBA': False, 'noSpecificTime': False}, 'end': {'approximate': False, 'noSpecificTime': False}, 'timezone': 'America/Denver', 'status': {'code': 'onsale'}, 'spanMultipleDays': False}, 'classifications': [{'primary': True, 'segment': {'id': 'KZFzniwnSyZfZ7v7nJ', 'name': 'Music'}, 'genre': {'id': 'KnvZfZ7vAvF', 'name': 'Dance/Electronic'}, 'subGenre': {'id': 'KZazBEonSMnZfZ7vAtI', 'name': 'Techno-House'}, 'type': {'id': 'KZAyXgnZfZ7v7nI', 'name': 'Undefined'}, 'subType': {'id': 'KZFzBErXgnZfZ7v7lJ', 'name': 'Undefined'}, 'family': False}], 'promoter': {'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}, 'promoters': [{'id': '4100', 'name': 'INSOMNIAC PRESENTS', 'description': 'INSOMNIAC PRESENTS / NTL / USA'}], 'info': '**PLEASE NOTE** Tickets are currently being held and will be released 3 days before your event. If you still havent received your tickets 48 hours before the event please contact info@ticketweb.com TABLE SERVICEPlease email https://vinylnightclub.com/vip ENTRY/DRESS CODEAges 21+. All sales are final.Please visit our FAQ page:https://vinylnightclub.com/faq/ STUBHUB / VIVID SEATS / OTHER THIRD-PARTY RESELLERSThe Basement at Club Vinyl has NO association with StubHub, Vivid Seats, or any third-party resellers. Tickets purchased from these sites will not be valid for entry. Any tickets purchased from a third party will not give the buyer access to the ticket and its benefits. The only acceptable tickets for entry may be purchased through TicketWeb and, in some cases, TIXR.Your government-issued ID must match the name on the ticket.', 'pleaseNote': 'This event is 21 and over. Any ticket holder unable to present valid identification indicating that they are at least 21 years of age will not be admitted to this event, and will not be eligible for a refund.', 'priceRanges': [{'type': 'standard', 'currency': 'USD', 'min': 24.95, 'max': 24.95}], '_links': {'self': {'href': '/discovery/v2/events/rZ7HnEZ1AK0VC7?locale=en-us'}, 'venues': [{'href': '/discovery/v2/venues/rZ7HnEZ17QA4S?locale=en-us'}]}, '_embedded': {'venues': [{'name': 'The Basement at Club Vinyl', 'type': 'venue', 'id': 'rZ7HnEZ17QA4S', 'test': False, 'url': 'https://www.ticketweb.com/venue/the-basement-at-club-vinyl-denver-co/685573', 'locale': 'en-us', 'postalCode': '80203', 'timezone': 'America/Denver', 'city': {'name': 'Denver'}, 'state': {'name': 'Colorado', 'stateCode': 'CO'}, 'country': {'name': 'United States Of America', 'countryCode': 'US'}, 'address': {'line1': '1082 Broadway'}, 'location': {'longitude': '-104.987060', 'latitude': '39.733550'}, 'upcomingEvents': {'ticketweb': 20, '_total': 20, '_filtered': 0}, '_links': {'self': {'href': '/discovery/v2/venues/rZ7HnEZ17QA4S?locale=en-us'}}}]}}]}, '_links': {'first': {'href': '/discovery/v2/events.json?classificationName=EDM%2CHouse%2CTechno%2CTrance%2CDubstep&page=0&size=5&sort=relevance,desc'}, 'self': {'href': '/discovery/v2/events.json?size=5&classificationName=EDM%2CHouse%2CTechno%2CTrance%2CDubstep&sort=relevance%2Cdesc'}, 'next': {'href': '/discovery/v2/events.json?classificationName=EDM%2CHouse%2CTechno%2CTrance%2CDubstep&page=1&size=5&sort=relevance,desc'}, 'last': {'href': '/discovery/v2/events.json?classificationName=EDM%2CHouse%2CTechno%2CTrance%2CDubstep&page=85&size=5&sort=relevance,desc'}}, 'page': {'size': 5, 'totalElements': 427, 'totalPages': 86, 'number': 0}}}, 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': None}}
2025-08-13 15:13:58,608 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:13:58,608 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:13:58,674 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:19:21,579 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:19:21,579 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:19:21,636 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:19:39,934 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:19:39,936 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:19:39,992 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:19:58,696 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:19:58,696 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:19:58,744 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:20:02,787 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:20:02,790 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:20:02,855 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:20:09,037 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:20:09,039 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:20:09,095 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:20:33,413 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-4230e46f-2a1a-4578-8c05-9d5833e9c4d9', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000272A15D9300>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:20:33,496 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:20:33,496 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:20:33,537 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000272A15FD370>
2025-08-13 15:20:33,537 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002729FEB54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:20:33,569 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000272A15FD0D0>
2025-08-13 15:20:33,569 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:20:33,569 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:20:33,569 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:20:33,569 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:20:33,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:20:34,146 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:20:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb99b60ccc1739-SJC')])
2025-08-13 15:20:34,146 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:20:34,146 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:20:34,361 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:20:34,362 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:20:34,362 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:20:34,362 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:20:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb99b60ccc1739-SJC'})
2025-08-13 15:20:34,362 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:20:34,378 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:20:34,386 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-61fb0afd-4072-43e8-857f-db66096d2843', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000272A15D9300>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='562821b0-9de1-4392-a527-4d8445381a8e'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:20:34,386 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:20:34,386 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:20:34,394 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:20:34,395 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:20:34,395 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:20:34,395 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:20:34,735 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:20:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb99bb2a7e1739-SJC')])
2025-08-13 15:20:34,735 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:20:34,735 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:20:35,151 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:20:35,151 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:20:35,151 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:20:35,151 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:20:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb99bb2a7e1739-SJC'})
2025-08-13 15:20:35,151 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:20:35,167 - root - INFO - Searching for events
2025-08-13 15:20:35,472 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='562821b0-9de1-4392-a527-4d8445381a8e')], 'message_type': 'get_concerts', 'result': {'events': [{'name': 'HOL!', 'url': 'https://www.ticketweb.com/event/hol-nova-sd-tickets/13893854', 'image_url': 'https://s1.ticketm.net/dam/a/ba7/b616070f-6cc0-4d1b-b160-0bbecaafaba7_1764131_TABLET_LANDSCAPE_16_9.jpg'}, {'name': 'Jason Ross', 'url': 'https://www.ticketweb.com/event/jason-ross-bloom-tickets/13915084', 'image_url': 'https://s1.ticketm.net/dam/a/a46/f7211c2c-c7f3-461f-bfd4-f0784b885a46_RETINA_LANDSCAPE_16_9.jpg'}, {'name': 'Roddy Lima', 'url': 'https://www.ticketweb.com/event/roddy-lima-the-basement-at-club-vinyl-tickets/14478693', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RECOMENDATION_16_9.jpg'}, {'name': 'Biscits', 'url': 'https://www.ticketweb.com/event/biscits-time-nightclub-tickets/13682004', 'image_url': 'https://s1.ticketm.net/dam/a/c2d/bb03b8a4-2b1c-494c-8e45-a6dc50dddc2d_TABLET_LANDSCAPE_LARGE_16_9.jpg'}, {'name': 'Pegassi', 'url': 'https://www.ticketweb.com/event/pegassi-the-basement-at-club-vinyl-tickets/13934384', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RECOMENDATION_16_9.jpg'}]}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 15:21:09,433 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:21:09,433 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:21:09,488 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:21:15,705 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:21:15,705 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:21:15,769 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:21:20,816 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-1b86ae57-4017-4013-b9bc-7a72add438b4', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002210C96AC00>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:21:20,903 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:21:20,903 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:21:20,919 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002210C9FD0D0>
2025-08-13 15:21:20,919 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002210C3A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:21:20,960 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002210C9FCEC0>
2025-08-13 15:21:20,961 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:21:20,961 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:21:20,961 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:21:20,961 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:21:20,961 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:21:21,527 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:21:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb9ade388908cf-LAX')])
2025-08-13 15:21:21,533 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:21:21,535 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:21:21,713 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:21:21,713 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:21:21,713 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:21:21,715 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:21:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb9ade388908cf-LAX'})
2025-08-13 15:21:21,715 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:21:21,731 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:21:21,731 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2037267c-0898-44d1-a98b-a81565f93abb', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002210A7BFEC0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='685cbe91-6ecb-4460-9695-0c2078f4ba0d'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:21:21,739 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:21:21,739 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:21:21,739 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:21:21,739 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:21:21,739 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:21:21,739 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:21:22,199 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:21:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb9ae31e4e08cf-LAX')])
2025-08-13 15:21:22,208 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:21:22,209 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:21:22,597 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:21:22,597 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:21:22,597 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:21:22,602 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:21:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb9ae31e4e08cf-LAX'})
2025-08-13 15:21:22,603 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:21:22,610 - root - INFO - Searching for events
2025-08-13 15:21:22,857 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='685cbe91-6ecb-4460-9695-0c2078f4ba0d')], 'message_type': 'get_concerts', 'result': {'error': "Error searching events: '_embedded'"}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 15:21:40,609 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:21:40,609 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:21:40,664 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:21:40,782 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-fb753aa6-665c-4533-a7a4-ca457a5e521e', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000014235BD93A0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:21:40,848 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:21:40,853 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:21:40,864 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014235BFCE30>
2025-08-13 15:21:40,864 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000142355A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:21:40,894 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014235A5B9E0>
2025-08-13 15:21:40,894 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:21:40,895 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:21:40,895 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:21:40,895 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:21:40,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:21:41,275 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:21:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb9b5acf5f943a-SJC')])
2025-08-13 15:21:41,283 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:21:41,283 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:21:41,405 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:21:41,405 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:21:41,405 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:21:41,405 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:21:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb9b5acf5f943a-SJC'})
2025-08-13 15:21:41,405 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:21:41,422 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:21:41,422 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-951fe016-4eab-4589-9d17-3d9e61a37730', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000014235BD93A0>, 'json_data': {'messages': [{'content': 'Set genres and postal code from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], postal_code: "90001")', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='269bc043-fef8-4055-84e3-9a3cc864d911'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:21:41,422 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:21:41,422 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:21:41,422 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:21:41,422 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:21:41,430 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:21:41,430 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:21:42,151 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:21:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eb9b5e1a55943a-SJC')])
2025-08-13 15:21:42,152 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:21:42,152 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:21:42,315 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:21:42,315 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:21:42,315 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:21:42,315 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:21:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eb9b5e1a55943a-SJC'})
2025-08-13 15:21:42,315 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:21:42,340 - root - INFO - Searching for events
2025-08-13 15:21:42,647 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='269bc043-fef8-4055-84e3-9a3cc864d911')], 'message_type': 'get_concerts', 'result': {'events': [{'name': 'WeTouchGrass presents: Anime Rave', 'url': 'https://www.ticketweb.com/event/wetouchgrass-presents-anime-rave-mulcahys-tickets/14422733', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_3_2.jpg'}, {'name': 'BIG BUBBLE RAVE', 'url': 'https://www.ticketweb.com/event/big-bubble-rave-the-song-dance-tickets/13917724', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_3_2.jpg'}, {'name': 'Sploinky Rave', 'url': 'https://www.ticketweb.com/event/sploinky-rave-the-ritz-tickets/13891714', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_3_2.jpg'}, {'name': 'Little Big  The Original Skibidi Tour', 'url': 'https://www.ticketweb.com/event/little-big-the-original-howard-theatre-tickets/13915754', 'image_url': 'https://s1.ticketm.net/dam/a/452/84901e9a-dfa1-4a3e-943c-7683b8cbc452_EVENT_DETAIL_PAGE_16_9.jpg'}, {'name': 'Neitherworld 4', 'url': 'https://www.ticketweb.com/event/neitherworld-4-middle-east-downstairs-tickets/13922674', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_3_2.jpg'}]}, 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': '90001'}}
2025-08-13 15:26:42,982 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:26:42,982 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:26:43,040 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:26:47,524 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:26:47,524 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:26:47,581 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:26:57,545 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-b5e36dfe-c8c9-401b-8032-459a6946baf0', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000024BCDC6B100>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:26:57,650 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:26:57,650 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:26:57,692 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000024BCDCFCF50>
2025-08-13 15:26:57,692 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000024BCD6A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:26:57,733 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000024BCDCFC8C0>
2025-08-13 15:26:57,735 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:26:57,735 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:26:57,735 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:26:57,735 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:26:57,735 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:26:58,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:26:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eba317082d8409-LAX')])
2025-08-13 15:26:58,535 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:26:58,535 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:26:58,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:26:58,617 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:26:58,623 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:26:58,623 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:26:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eba317082d8409-LAX'})
2025-08-13 15:26:58,623 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:26:58,641 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:26:58,650 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-ae0fe23b-f807-48c4-859a-2d9588e73b38', 'post_parser': <function Completions.parse.<locals>.parser at 0x0000024BCDC6B100>, 'json_data': {'messages': [{'content': 'Set genres and lat & long from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], lat: 34.0522, lon: -118.2437)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='4983cc22-4f91-4a97-bb4c-8ece7a1d777e'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:26:58,650 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:26:58,650 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:26:58,650 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:26:58,650 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:26:58,650 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:26:58,650 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:26:59,185 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:26:59 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eba31ccc578409-LAX')])
2025-08-13 15:26:59,185 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:26:59,185 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:26:59,434 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:26:59,434 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:26:59,434 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:26:59,434 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:26:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eba31ccc578409-LAX'})
2025-08-13 15:26:59,434 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:26:59,461 - root - INFO - Searching for events
2025-08-13 15:27:20,304 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:27:20,304 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:27:20,367 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:27:34,262 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-5109ce49-58cf-4864-ae4a-4b7c4fa28007', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000158F49D9440>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in Los Angeles?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:27:34,369 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:27:34,369 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:27:34,382 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F49FD190>
2025-08-13 15:27:34,385 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000158F43A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:27:34,421 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F48BE000>
2025-08-13 15:27:34,421 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:27:34,421 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:27:34,421 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:27:34,421 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:27:34,426 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:27:35,136 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:27:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eba3fc5d9aeb1e-SJC')])
2025-08-13 15:27:35,139 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:27:35,139 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:27:35,368 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:27:35,368 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:27:35,368 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:27:35,368 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:27:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eba3fc5d9aeb1e-SJC'})
2025-08-13 15:27:35,370 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:27:35,386 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:27:35,392 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-7910e564-5ed1-47e3-9b3b-c8895217cb7c', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000158F49D9440>, 'json_data': {'messages': [{'content': 'Set genres and lat & long from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], lat: 34.0522, lon: -118.2437)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in Los Angeles?' additional_kwargs={} response_metadata={} id='f9c364ee-de7b-4cfd-bf87-b24ca99beeae'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:27:35,393 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:27:35,393 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:27:35,393 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:27:35,393 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:27:35,393 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:27:35,393 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:27:35,910 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:27:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eba4026bc3eb1e-SJC')])
2025-08-13 15:27:35,910 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:27:35,910 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:27:36,442 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:27:36,442 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:27:36,442 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:27:36,442 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:27:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eba4026bc3eb1e-SJC'})
2025-08-13 15:27:36,442 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:27:36,466 - root - INFO - Searching for events
2025-08-13 15:27:36,794 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in Los Angeles?', additional_kwargs={}, response_metadata={}, id='f9c364ee-de7b-4cfd-bf87-b24ca99beeae')], 'message_type': 'get_concerts', 'result': {'events': [{'name': 'Will Clarke (Extended Set)', 'url': 'https://www.ticketweb.com/event/will-clarke-extended-set-exchange-la-tickets/13853164', 'image_url': 'https://i.ticketweb.com/i/00/12/61/30/94_Edp.jpg?v=15'}, {'name': 'OMNOM 360', 'url': 'https://www.ticketweb.com/event/omnom-360-exchange-la-tickets/13935034', 'image_url': 'https://i.ticketweb.com/i/00/12/69/28/14_Edp.jpg?v=10'}, {'name': 'Will Sparks', 'url': 'https://www.ticketweb.com/event/will-sparks-exchange-la-tickets/13939364', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_EVENT_DETAIL_PAGE_16_9.jpg'}, {'name': 'Day Trip ft. MK', 'url': 'https://www.ticketweb.com/event/day-trip-ft-mk-los-angeles-state-historic-park-tickets/14408693', 'image_url': 'https://s1.ticketm.net/dam/a/3bf/20d5dd8d-e8f7-4a16-b737-b6d1643fb3bf_TABLET_LANDSCAPE_LARGE_16_9.jpg'}, {'name': 'Wakyin', 'url': 'https://www.ticketweb.com/event/wakyin-academy-la-tickets/13837804', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RECOMENDATION_16_9.jpg'}]}, 'extracted_params': {'lat': 34.0522, 'lon': -118.2437, 'genres': ['rave', 'house'], 'postal_code': None}}
2025-08-13 15:29:32,304 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-95c98212-12b0-4d57-bcfd-b65af91d4a24', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000158F26EF060>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are the best rave, house concerts in San Francisco?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:29:32,304 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:29:32,304 - httpcore.connection - DEBUG - close.started
2025-08-13 15:29:32,304 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:29:32,304 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:29:32,329 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F4A58110>
2025-08-13 15:29:32,333 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000158F43A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:29:32,370 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F4810890>
2025-08-13 15:29:32,370 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:29:32,370 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:29:32,370 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:29:32,370 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:29:32,370 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:29:33,160 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:29:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eba6dd8f192b60-LAX')])
2025-08-13 15:29:33,160 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:29:33,160 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:29:33,283 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:29:33,283 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:29:33,283 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:29:33,283 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:29:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eba6dd8f192b60-LAX'})
2025-08-13 15:29:33,283 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:29:33,295 - llm_agent - INFO - Classified message: get_concerts
2025-08-13 15:29:33,300 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-723a1e49-2ab6-4e95-9224-4a969d5bbf3d', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000158F26EC040>, 'json_data': {'messages': [{'content': 'Set genres and lat & long from the user query (i.e. "EDM, House, Trance concerts in LA" -> genres: [EDM, House, Trance], lat: 34.0522, lon: -118.2437)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are the best rave, house concerts in San Francisco?' additional_kwargs={} response_metadata={} id='6f26fabd-65c7-426f-b6cb-c3c4eadb4907'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:29:33,301 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:29:33,301 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:29:33,302 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:29:33,302 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:29:33,302 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:29:33,302 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:29:33,692 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:29:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96eba6e35c222b60-LAX')])
2025-08-13 15:29:33,692 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:29:33,692 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:29:34,054 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:29:34,054 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:29:34,058 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:29:34,058 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:29:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96eba6e35c222b60-LAX'})
2025-08-13 15:29:34,058 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:29:34,065 - root - INFO - Searching for events
2025-08-13 15:29:34,378 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are the best rave, house concerts in San Francisco?', additional_kwargs={}, response_metadata={}, id='6f26fabd-65c7-426f-b6cb-c3c4eadb4907')], 'message_type': 'get_concerts', 'result': {'events': [{'name': 'Sploinky Rave', 'url': 'https://www.ticketweb.com/event/sploinky-rave-the-ritz-tickets/13891714', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_3_2.jpg'}, {'name': 'Darius', 'url': 'https://www.ticketweb.com/event/darius-the-independent-tickets/13941903', 'image_url': 'https://s1.ticketm.net/dam/a/22e/a85a1f64-b519-4bc0-91e2-2a2f81ba122e_1837061_EVENT_DETAIL_PAGE_16_9.jpg'}, {'name': 'Bolden.', 'url': 'https://www.ticketweb.com/event/bolden-brick-and-mortar-music-hall-tickets/13787014', 'image_url': 'https://s1.ticketm.net/dam/a/b96/8f4effd8-04b5-4e9b-acbd-1af25dd28b96_TABLET_LANDSCAPE_LARGE_16_9.jpg'}, {'name': 'Loud Luxury (Ages 18 & Over)', 'url': 'https://www.ticketmaster.com/event/Z7r9jZ1A7bP7t', 'image_url': 'https://s1.ticketm.net/dam/a/0a8/08b08804-b82d-45d4-8a1e-fdc11dacc0a8_EVENT_DETAIL_PAGE_16_9.jpg'}, {'name': 'Frank Walker', 'url': 'https://www.ticketweb.com/event/frank-walker-the-alpine-tickets/13928264', 'image_url': 'https://s1.ticketm.net/dam/c/df8/81eadad8-4449-412e-a2b1-3d8bbb78edf8_106181_RETINA_PORTRAIT_3_2.jpg'}]}, 'extracted_params': {'lat': 37.7749, 'lon': -122.4194, 'genres': ['rave', 'house'], 'postal_code': None}}
2025-08-13 15:32:30,105 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-d980f293-6e98-455a-97d5-a44505c1cef3', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000158F49D9F80>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are some good slow, soft songs?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:32:30,105 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:32:30,105 - httpcore.connection - DEBUG - close.started
2025-08-13 15:32:30,105 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:32:30,105 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:32:30,162 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F4A59880>
2025-08-13 15:32:30,162 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000158F43A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:32:30,223 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F4A59820>
2025-08-13 15:32:30,223 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:32:30,223 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:32:30,223 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:32:30,227 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:32:30,227 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:32:30,918 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:32:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebab352f66fa8e-SJC')])
2025-08-13 15:32:30,918 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:32:30,918 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:32:30,984 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:32:30,984 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:32:30,984 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:32:30,984 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:32:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebab352f66fa8e-SJC'})
2025-08-13 15:32:30,984 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:32:30,987 - llm_agent - INFO - Classified message: song_rec
2025-08-13 15:32:30,993 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-e7dc3086-5187-4168-bc2a-df97875c368c', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000158F4237060>, 'json_data': {'messages': [{'content': 'Extract user query song details (i.e. "Looking for melodic, upbeat rave songs" -> genres: [melodic, upbeat, rave])', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are some good slow, soft songs?' additional_kwargs={} response_metadata={} id='07c422e4-2161-425b-bd7c-fb536b6d82ca'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:32:30,993 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:32:30,993 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:32:30,993 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:32:30,993 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:32:30,993 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:32:30,993 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:32:31,431 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:32:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebab39ecaefa8e-SJC')])
2025-08-13 15:32:31,431 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:32:31,439 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:32:31,678 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:32:31,678 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:32:31,678 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:32:31,685 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:32:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebab39ecaefa8e-SJC'})
2025-08-13 15:32:31,685 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:32:32,128 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'idempotency_key': 'stainless-python-retry-8cc1082d-20e8-4aa3-9fa8-5c7525c0faf4', 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000158F49D9EE0>, 'json_data': {'input': 'Where are some good slow, soft songs?', 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2025-08-13 15:32:32,130 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2025-08-13 15:32:32,130 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-13 15:32:32,155 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F4A98D70>
2025-08-13 15:32:32,155 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000158F49D6FD0> server_hostname='api.openai.com' timeout=5.0
2025-08-13 15:32:32,197 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000158F4A5B9E0>
2025-08-13 15:32:32,197 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:32:32,197 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:32:32,197 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:32:32,197 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:32:32,197 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:32:32,960 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:32:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-ada-002-v2'), (b'openai-organization', b'chatbot-3yyzxk'), (b'openai-processing-ms', b'118'), (b'openai-project', b'proj_WqWbEC8ZFq40CblzZneNjf5G'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5c69449f8f-7zftg'), (b'x-envoy-upstream-service-time', b'342'), (b'x-ratelimit-limit-requests', b'3000'), (b'x-ratelimit-limit-tokens', b'1000000'), (b'x-ratelimit-remaining-requests', b'2999'), (b'x-ratelimit-remaining-tokens', b'999991'), (b'x-ratelimit-reset-requests', b'20ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_06a892f91e57498993c4d542fcb858c6'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=jNB6AZLLoXEddBBFbjAfxh8xdLLUoR128WXvLFk2UQk-1755124352885-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebab417f5615b8-SJC'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-13 15:32:32,961 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-08-13 15:32:32,961 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:32:32,963 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:32:32,963 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:32:32,963 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:32:32,963 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:32:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002-v2', 'openai-organization': 'chatbot-3yyzxk', 'openai-processing-ms': '118', 'openai-project': 'proj_WqWbEC8ZFq40CblzZneNjf5G', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'via': 'envoy-router-5c69449f8f-7zftg', 'x-envoy-upstream-service-time': '342', 'x-ratelimit-limit-requests': '3000', 'x-ratelimit-limit-tokens': '1000000', 'x-ratelimit-remaining-requests': '2999', 'x-ratelimit-remaining-tokens': '999991', 'x-ratelimit-reset-requests': '20ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_06a892f91e57498993c4d542fcb858c6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'set-cookie': '_cfuvid=jNB6AZLLoXEddBBFbjAfxh8xdLLUoR128WXvLFk2UQk-1755124352885-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'cf-ray': '96ebab417f5615b8-SJC', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-13 15:32:32,965 - openai._base_client - DEBUG - request_id: req_06a892f91e57498993c4d542fcb858c6
2025-08-13 15:32:35,871 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are some good slow, soft songs?', additional_kwargs={}, response_metadata={}, id='07c422e4-2161-425b-bd7c-fb536b6d82ca')], 'message_type': 'song_rec', 'result': {'song_recommendation': {'artists': 'keshi', 'genre': 'Indie/Alt R&B', 'id': 55.0, 'title': 'Blue', 'youtube_url': '(add link)'}, 'query': 'Where are some good slow, soft songs?', 'top_k': 5}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['slow', 'soft'], 'postal_code': None}}
2025-08-13 15:33:11,707 - httpcore.connection - DEBUG - close.started
2025-08-13 15:33:11,707 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:33:16,483 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:33:16,483 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:33:16,533 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:33:25,086 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:33:25,086 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:33:25,146 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:33:32,784 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:33:32,785 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:33:32,840 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:33:56,510 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:33:56,510 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:33:56,559 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:34:24,314 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:34:24,314 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:34:24,371 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:34:33,540 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-6a525ea7-cbb0-4447-baac-1e6a5bdd8b34', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001B0BD8D93A0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are some good slow, soft songs?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:34:33,639 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:34:33,640 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:34:33,647 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001B0BD8FCFE0>
2025-08-13 15:34:33,647 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B0BD2A5450> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:34:33,677 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001B0BD37CE30>
2025-08-13 15:34:33,680 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:34:33,680 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:34:33,680 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:34:33,680 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:34:33,680 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:34:34,959 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:34:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebae38bda615ac-SJC'), (b'Content-Encoding', b'gzip')])
2025-08-13 15:34:34,959 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:34:34,962 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:34:35,467 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:34:35,468 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:34:35,468 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:34:35,468 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:34:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebae38bda615ac-SJC', 'content-encoding': 'gzip'})
2025-08-13 15:34:35,468 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:34:35,484 - llm_agent - INFO - Classified message: song_rec
2025-08-13 15:34:35,486 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-ab14a256-a623-41ff-a900-5957402c32fa', 'post_parser': <function Completions.parse.<locals>.parser at 0x000001B0BD8D93A0>, 'json_data': {'messages': [{'content': 'Extract user query song details (i.e. "Looking for melodic, upbeat rave songs" -> genres: [melodic, upbeat, rave])', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are some good slow, soft songs?' additional_kwargs={} response_metadata={} id='323910e1-033d-499d-8d5d-9de275baedbf'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:34:35,486 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:34:35,486 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:34:35,491 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:34:35,491 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:34:35,492 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:34:35,492 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:34:36,018 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:34:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebae44097f15ac-SJC'), (b'Content-Encoding', b'gzip')])
2025-08-13 15:34:36,018 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:34:36,018 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:34:36,702 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:34:36,702 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:34:36,702 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:34:36,702 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:34:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebae44097f15ac-SJC', 'content-encoding': 'gzip'})
2025-08-13 15:34:36,702 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:34:37,104 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'idempotency_key': 'stainless-python-retry-a767b30b-75a8-4a07-89f9-f5f76c1c0573', 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001B0BD8DBB00>, 'json_data': {'input': {'content': 'Where are some good slow, soft songs?', 'id': '323910e1-033d-499d-8d5d-9de275baedbf'}, 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2025-08-13 15:34:37,104 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2025-08-13 15:34:37,104 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-13 15:34:37,148 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001B0BD96C320>
2025-08-13 15:34:37,149 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B0BD900BD0> server_hostname='api.openai.com' timeout=5.0
2025-08-13 15:34:37,180 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001B0BD8FFFE0>
2025-08-13 15:34:37,185 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:34:37,185 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:34:37,185 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:34:37,185 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:34:37,185 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:34:38,206 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Wed, 13 Aug 2025 22:34:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'214'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'chatbot-3yyzxk'), (b'openai-processing-ms', b'177'), (b'openai-project', b'proj_WqWbEC8ZFq40CblzZneNjf5G'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6ff8b4684-kpklc'), (b'x-envoy-upstream-service-time', b'512'), (b'x-ratelimit-limit-requests', b'3000'), (b'x-ratelimit-remaining-requests', b'2999'), (b'x-ratelimit-reset-requests', b'20ms'), (b'x-request-id', b'req_459001829c3d4b87b8efecc4f3fa9a04'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=LH3yxQVgbnoDGHfKbaOxL2NtoqHX0rZlpKS7zdtFdUk-1755124478155-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebae4e9947fb4c-SJC'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-13 15:34:38,206 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 400 Bad Request"
2025-08-13 15:34:38,206 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:34:38,206 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:34:38,206 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:34:38,206 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:34:38,206 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "400 Bad Request" Headers({'date': 'Wed, 13 Aug 2025 22:34:38 GMT', 'content-type': 'application/json', 'content-length': '214', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'chatbot-3yyzxk', 'openai-processing-ms': '177', 'openai-project': 'proj_WqWbEC8ZFq40CblzZneNjf5G', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'via': 'envoy-router-6ff8b4684-kpklc', 'x-envoy-upstream-service-time': '512', 'x-ratelimit-limit-requests': '3000', 'x-ratelimit-remaining-requests': '2999', 'x-ratelimit-reset-requests': '20ms', 'x-request-id': 'req_459001829c3d4b87b8efecc4f3fa9a04', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'set-cookie': '_cfuvid=LH3yxQVgbnoDGHfKbaOxL2NtoqHX0rZlpKS7zdtFdUk-1755124478155-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'cf-ray': '96ebae4e9947fb4c-SJC', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-13 15:34:38,206 - openai._base_client - DEBUG - request_id: req_459001829c3d4b87b8efecc4f3fa9a04
2025-08-13 15:34:38,206 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Users\matth\langchain-agent-backend\venv\Lib\site-packages\openai\_base_client.py", line 1027, in request
    response.raise_for_status()
  File "C:\Users\matth\langchain-agent-backend\venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.openai.com/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-08-13 15:34:38,258 - openai._base_client - DEBUG - Not retrying
2025-08-13 15:34:38,258 - openai._base_client - DEBUG - Re-raising status error
2025-08-13 15:34:38,258 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are some good slow, soft songs?', additional_kwargs={}, response_metadata={}, id='323910e1-033d-499d-8d5d-9de275baedbf')], 'message_type': 'song_rec', 'result': {'error': 'Failed to get embedding for query'}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['slow', 'soft'], 'postal_code': None}}
2025-08-13 15:35:46,064 - httpcore.connection - DEBUG - close.started
2025-08-13 15:35:46,064 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:35:49,843 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 15:35:49,843 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 15:35:49,912 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 15:35:55,107 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-631a30e7-fa3d-49eb-8253-8cc7993ed01f', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002495DB6AAC0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are some good slow, soft songs?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:35:55,198 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:35:55,198 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:35:55,214 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002495DABE510>
2025-08-13 15:35:55,214 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495D5A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:35:55,277 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002495DBFCD10>
2025-08-13 15:35:55,280 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:35:55,280 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:35:55,280 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:35:55,280 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:35:55,280 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:35:55,931 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:35:55 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb036cb4315df-SJC')])
2025-08-13 15:35:55,931 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:35:55,931 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:35:55,971 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:35:55,971 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:35:55,971 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:35:55,971 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:35:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb036cb4315df-SJC'})
2025-08-13 15:35:55,971 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:35:55,988 - llm_agent - INFO - Classified message: song_rec
2025-08-13 15:35:55,988 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-0fdf2442-5205-48cf-8edf-b0016b32910d', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002495B8CFEC0>, 'json_data': {'messages': [{'content': 'Extract user query song details (i.e. "Looking for melodic, upbeat rave songs" -> genres: [melodic, upbeat, rave])', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are some good slow, soft songs?' additional_kwargs={} response_metadata={} id='f466e2c2-a3c6-426b-921f-939fb77bd2ee'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:35:55,996 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:35:55,996 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:35:55,998 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:35:55,998 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:35:55,998 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:35:55,998 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:35:56,339 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:35:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb03b3fa915df-SJC')])
2025-08-13 15:35:56,339 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:35:56,339 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:35:56,683 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:35:56,683 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:35:56,683 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:35:56,683 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:35:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb03b3fa915df-SJC'})
2025-08-13 15:35:56,683 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:35:56,994 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'idempotency_key': 'stainless-python-retry-32efaccc-0c92-42dc-b057-30980e42d33b', 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002495DBD9EE0>, 'json_data': {'input': 'Where are some good slow, soft songs?', 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2025-08-13 15:35:56,994 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2025-08-13 15:35:56,994 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-13 15:35:57,050 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002495DC64380>
2025-08-13 15:35:57,051 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495DBE83D0> server_hostname='api.openai.com' timeout=5.0
2025-08-13 15:35:57,083 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002495DBFFEC0>
2025-08-13 15:35:57,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:35:57,083 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:35:57,083 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:35:57,083 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:35:57,083 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:35:57,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:35:57 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-ada-002-v2'), (b'openai-organization', b'chatbot-3yyzxk'), (b'openai-processing-ms', b'48'), (b'openai-project', b'proj_WqWbEC8ZFq40CblzZneNjf5G'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6f99c58d54-hdm4k'), (b'x-envoy-upstream-service-time', b'196'), (b'x-ratelimit-limit-requests', b'3000'), (b'x-ratelimit-limit-tokens', b'1000000'), (b'x-ratelimit-remaining-requests', b'2999'), (b'x-ratelimit-remaining-tokens', b'999991'), (b'x-ratelimit-reset-requests', b'20ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_350010557a3348f485f74fe7c970e49b'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Fr_PBNNvkcSN073A8N3.xfO_HUFZ2WzBCInWxcCVSdA-1755124557630-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb042097b15ea-SJC'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-13 15:35:57,617 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-08-13 15:35:57,617 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:35:57,650 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:35:57,650 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:35:57,650 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:35:57,657 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:35:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002-v2', 'openai-organization': 'chatbot-3yyzxk', 'openai-processing-ms': '48', 'openai-project': 'proj_WqWbEC8ZFq40CblzZneNjf5G', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'via': 'envoy-router-6f99c58d54-hdm4k', 'x-envoy-upstream-service-time': '196', 'x-ratelimit-limit-requests': '3000', 'x-ratelimit-limit-tokens': '1000000', 'x-ratelimit-remaining-requests': '2999', 'x-ratelimit-remaining-tokens': '999991', 'x-ratelimit-reset-requests': '20ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_350010557a3348f485f74fe7c970e49b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'set-cookie': '_cfuvid=Fr_PBNNvkcSN073A8N3.xfO_HUFZ2WzBCInWxcCVSdA-1755124557630-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'cf-ray': '96ebb042097b15ea-SJC', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-13 15:35:57,657 - openai._base_client - DEBUG - request_id: req_350010557a3348f485f74fe7c970e49b
2025-08-13 15:35:58,595 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are some good slow, soft songs?', additional_kwargs={}, response_metadata={}, id='f466e2c2-a3c6-426b-921f-939fb77bd2ee')], 'message_type': 'song_rec', 'result': {'song_recommendation': {'artists': 'keshi', 'genre': 'Indie/Alt R&B', 'id': 55.0, 'title': 'Blue', 'youtube_url': '(add link)'}}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['slow', 'soft'], 'postal_code': None}}
2025-08-13 15:36:34,722 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-9827c963-9c6a-4e72-8faf-042ed99b2139', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002497FF660C0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are some popular john summit songs?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:36:34,722 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:36:34,722 - httpcore.connection - DEBUG - close.started
2025-08-13 15:36:34,722 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:36:34,722 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:36:34,733 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF71130>
2025-08-13 15:36:34,733 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495D5A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:36:34,772 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF71040>
2025-08-13 15:36:34,772 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:36:34,772 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:36:34,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:36:34,775 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:36:34,775 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:36:35,215 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:36:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb12d8a0c1576-SJC')])
2025-08-13 15:36:35,223 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:36:35,223 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:36:35,330 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:36:35,330 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:36:35,330 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:36:35,330 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:36:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb12d8a0c1576-SJC'})
2025-08-13 15:36:35,330 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:36:35,338 - llm_agent - INFO - Classified message: song_rec
2025-08-13 15:36:35,338 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-d97dbcce-a4f4-4988-8ed1-3ccda5aa24ce', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002497FF66340>, 'json_data': {'messages': [{'content': 'Extract user query song details (i.e. "Looking for melodic, upbeat rave songs" -> genres: [melodic, upbeat, rave])', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are some popular john summit songs?' additional_kwargs={} response_metadata={} id='8e34da74-735e-41e4-823f-8829151b1706'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:36:35,346 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:36:35,346 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:36:35,346 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:36:35,346 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:36:35,346 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:36:35,346 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:36:35,781 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:36:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb1312e461576-SJC')])
2025-08-13 15:36:35,781 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:36:35,781 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:36:36,077 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:36:36,077 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:36:36,077 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:36:36,077 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:36:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb1312e461576-SJC'})
2025-08-13 15:36:36,084 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:36:36,094 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'idempotency_key': 'stainless-python-retry-55b9c2c8-868b-41a7-8b47-e85b033d8525', 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002497FF65DA0>, 'json_data': {'input': 'Where are some popular john summit songs?', 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2025-08-13 15:36:36,094 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2025-08-13 15:36:36,094 - httpcore.connection - DEBUG - close.started
2025-08-13 15:36:36,094 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:36:36,094 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-13 15:36:36,168 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF72ED0>
2025-08-13 15:36:36,168 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495DBE83D0> server_hostname='api.openai.com' timeout=5.0
2025-08-13 15:36:36,202 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF718E0>
2025-08-13 15:36:36,202 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:36:36,202 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:36:36,208 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:36:36,208 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:36:36,208 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:36:41,991 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:36:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-ada-002-v2'), (b'openai-organization', b'chatbot-3yyzxk'), (b'openai-processing-ms', b'108'), (b'openai-project', b'proj_WqWbEC8ZFq40CblzZneNjf5G'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-5dc54b87dd-ldwsv'), (b'x-envoy-upstream-service-time', b'365'), (b'x-ratelimit-limit-requests', b'3000'), (b'x-ratelimit-limit-tokens', b'1000000'), (b'x-ratelimit-remaining-requests', b'2999'), (b'x-ratelimit-remaining-tokens', b'999990'), (b'x-ratelimit-reset-requests', b'20ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_fd3d6bcd9ef9433292493d44f360bc6c'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb1368b28eb2a-SJC'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-13 15:36:41,992 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-08-13 15:36:41,992 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:36:41,994 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:36:41,994 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:36:41,994 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:36:41,994 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:36:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002-v2', 'openai-organization': 'chatbot-3yyzxk', 'openai-processing-ms': '108', 'openai-project': 'proj_WqWbEC8ZFq40CblzZneNjf5G', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'via': 'envoy-router-5dc54b87dd-ldwsv', 'x-envoy-upstream-service-time': '365', 'x-ratelimit-limit-requests': '3000', 'x-ratelimit-limit-tokens': '1000000', 'x-ratelimit-remaining-requests': '2999', 'x-ratelimit-remaining-tokens': '999990', 'x-ratelimit-reset-requests': '20ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_fd3d6bcd9ef9433292493d44f360bc6c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb1368b28eb2a-SJC', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-13 15:36:41,994 - openai._base_client - DEBUG - request_id: req_fd3d6bcd9ef9433292493d44f360bc6c
2025-08-13 15:36:42,210 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are some popular john summit songs?', additional_kwargs={}, response_metadata={}, id='8e34da74-735e-41e4-823f-8829151b1706')], 'message_type': 'song_rec', 'result': {'song_recommendation': {'artists': 'Bixby', 'genre': 'Pop/Indie Pop', 'id': 392.0, 'title': 'endlessly', 'youtube_url': '(add link)'}}, 'extracted_params': {'lat': None, 'lon': None, 'genres': None, 'postal_code': None}}
2025-08-13 15:36:53,979 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-57cc1246-e7ae-48ec-9d04-5056df868ac8', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002497FF663E0>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where are some popular EDM songs?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 15:36:53,979 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:36:53,979 - httpcore.connection - DEBUG - close.started
2025-08-13 15:36:53,979 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:36:53,987 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 15:36:53,996 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF94AA0>
2025-08-13 15:36:53,996 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495D5A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 15:36:54,036 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF949B0>
2025-08-13 15:36:54,040 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:36:54,040 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:36:54,040 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:36:54,040 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:36:54,040 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:36:54,504 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:36:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb1a5f96a7acd-SJC')])
2025-08-13 15:36:54,505 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:36:54,505 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:36:54,792 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:36:54,792 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:36:54,792 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:36:54,792 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:36:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb1a5f96a7acd-SJC'})
2025-08-13 15:36:54,794 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:36:54,799 - llm_agent - INFO - Classified message: song_rec
2025-08-13 15:36:54,799 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-ab5f3201-65d2-4742-a86b-b09235566664', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002495DBDA480>, 'json_data': {'messages': [{'content': 'Extract user query song details (i.e. "Looking for melodic, upbeat rave songs" -> genres: [melodic, upbeat, rave])', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where are some popular EDM songs?' additional_kwargs={} response_metadata={} id='8259c086-7908-4888-a007-1ad527c7adfd'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 15:36:54,799 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 15:36:54,799 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:36:54,799 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:36:54,799 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:36:54,808 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:36:54,808 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:36:55,404 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:36:55 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb1aacec17acd-SJC')])
2025-08-13 15:36:55,405 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 15:36:55,405 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:36:55,661 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:36:55,661 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:36:55,661 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:36:55,661 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:36:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb1aacec17acd-SJC'})
2025-08-13 15:36:55,661 - openai._base_client - DEBUG - request_id: None
2025-08-13 15:36:55,666 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'idempotency_key': 'stainless-python-retry-1ee456d7-29c3-456c-a37e-a4da7ff8fbd3', 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002495DBDA480>, 'json_data': {'input': 'Where are some popular EDM songs?', 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2025-08-13 15:36:55,666 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2025-08-13 15:36:55,666 - httpcore.connection - DEBUG - close.started
2025-08-13 15:36:55,670 - httpcore.connection - DEBUG - close.complete
2025-08-13 15:36:55,670 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-13 15:36:55,700 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF95A30>
2025-08-13 15:36:55,700 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495DBE83D0> server_hostname='api.openai.com' timeout=5.0
2025-08-13 15:36:55,736 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF958B0>
2025-08-13 15:36:55,736 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 15:36:55,739 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 15:36:55,739 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 15:36:55,739 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 15:36:55,739 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 15:36:56,510 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 22:36:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-ada-002-v2'), (b'openai-organization', b'chatbot-3yyzxk'), (b'openai-processing-ms', b'35'), (b'openai-project', b'proj_WqWbEC8ZFq40CblzZneNjf5G'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'via', b'envoy-router-6cbd8d47f6-xn5dw'), (b'x-envoy-upstream-service-time', b'338'), (b'x-ratelimit-limit-requests', b'3000'), (b'x-ratelimit-limit-tokens', b'1000000'), (b'x-ratelimit-remaining-requests', b'2999'), (b'x-ratelimit-remaining-tokens', b'999992'), (b'x-ratelimit-reset-requests', b'20ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_91627191cc6b4b64861a8e75a36ed72c'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebb1b09d17eb2c-SJC'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-13 15:36:56,510 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-08-13 15:36:56,513 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 15:36:56,555 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 15:36:56,555 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 15:36:56,555 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 15:36:56,557 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Wed, 13 Aug 2025 22:36:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002-v2', 'openai-organization': 'chatbot-3yyzxk', 'openai-processing-ms': '35', 'openai-project': 'proj_WqWbEC8ZFq40CblzZneNjf5G', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'via': 'envoy-router-6cbd8d47f6-xn5dw', 'x-envoy-upstream-service-time': '338', 'x-ratelimit-limit-requests': '3000', 'x-ratelimit-limit-tokens': '1000000', 'x-ratelimit-remaining-requests': '2999', 'x-ratelimit-remaining-tokens': '999992', 'x-ratelimit-reset-requests': '20ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_91627191cc6b4b64861a8e75a36ed72c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebb1b09d17eb2c-SJC', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-13 15:36:56,557 - openai._base_client - DEBUG - request_id: req_91627191cc6b4b64861a8e75a36ed72c
2025-08-13 15:36:56,725 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where are some popular EDM songs?', additional_kwargs={}, response_metadata={}, id='8259c086-7908-4888-a007-1ad527c7adfd')], 'message_type': 'song_rec', 'result': {'song_recommendation': {'artists': 'Martin Garrix', 'genre': 'Big Room House/EDM', 'id': 179.0, 'title': 'Animals', 'youtube_url': 'https://www.youtube.com/watch?v=gCYcHz2k5x0'}}, 'extracted_params': {'lat': None, 'lon': None, 'genres': ['EDM'], 'postal_code': None}}
2025-08-13 16:08:36,422 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-2f5f6619-f655-469e-aa61-5f009a5d4466', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002497FF66C00>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where is the weather like in Seattle?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 16:08:36,425 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:08:36,425 - httpcore.connection - DEBUG - close.started
2025-08-13 16:08:36,427 - httpcore.connection - DEBUG - close.complete
2025-08-13 16:08:36,427 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 16:08:36,463 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF97410>
2025-08-13 16:08:36,463 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002495D5A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 16:08:36,495 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002497FF97140>
2025-08-13 16:08:36,495 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:08:36,503 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:08:36,503 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:08:36,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:08:36,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:08:37,270 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:08:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebe0186ce86899-SJC')])
2025-08-13 16:08:37,270 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:08:37,270 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:08:37,278 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:08:37,278 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:08:37,278 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:08:37,278 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:08:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebe0186ce86899-SJC'})
2025-08-13 16:08:37,281 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:08:37,286 - llm_agent - INFO - Classified message: get_weather
2025-08-13 16:08:37,294 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-4ef547be-a4e7-4fa6-8515-88b14f5591a7', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002497FF672E0>, 'json_data': {'messages': [{'content': 'Set the longitude and latitude from the user query (i.e. "weather in San Diego" -> lat: 32.7157, lon: -117.1611)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where is the weather like in Seattle?' additional_kwargs={} response_metadata={} id='e79a1e32-594a-4e54-800f-7315a4ff7a97'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 16:08:37,294 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:08:37,294 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:08:37,303 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:08:37,303 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:08:37,303 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:08:37,303 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:08:37,912 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:08:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebe01d8b0a6899-SJC')])
2025-08-13 16:08:37,912 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:08:37,912 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:08:38,184 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:08:38,184 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:08:38,184 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:08:38,184 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:08:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebe01d8b0a6899-SJC'})
2025-08-13 16:08:38,184 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:08:38,365 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where is the weather like in Seattle?', additional_kwargs={}, response_metadata={}, id='e79a1e32-594a-4e54-800f-7315a4ff7a97')], 'message_type': 'get_weather', 'result': {'error': "Error getting weather: name 'clean_location' is not defined"}, 'extracted_params': {'lat': 47.6062, 'lon': -122.3321, 'genres': None, 'postal_code': None}}
2025-08-13 16:11:31,765 - httpcore.connection - DEBUG - close.started
2025-08-13 16:11:31,767 - httpcore.connection - DEBUG - close.complete
2025-08-13 16:11:36,621 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:11:36,622 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:11:36,724 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:11:42,566 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:11:42,566 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:11:42,615 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:11:46,643 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:11:46,643 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:11:46,706 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:13:32,328 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:13:32,336 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:13:32,386 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:15:51,612 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:15:51,612 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:15:51,675 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:15:56,537 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:15:56,537 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:15:56,611 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:16:48,688 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:16:48,688 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:16:48,737 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:16:55,696 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:16:55,696 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:16:55,753 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:21:14,045 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:21:14,045 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:21:14,097 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:21:53,408 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:21:53,408 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:21:53,461 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:22:36,236 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:22:36,236 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:22:36,295 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:23:35,858 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:23:35,858 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:23:35,917 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:23:41,176 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:23:41,176 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:23:41,219 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:23:59,514 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-53f4879c-2635-4f8d-90b0-62403490098b', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002564BB6AF20>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where is the weather like in Seattle?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 16:23:59,617 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:23:59,617 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 16:23:59,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002564BBFD040>
2025-08-13 16:23:59,657 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002564B5A54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 16:23:59,682 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002564BB6DCA0>
2025-08-13 16:23:59,682 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:23:59,682 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:23:59,682 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:23:59,682 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:23:59,690 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:24:00,142 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:24:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebf6a25c1ceb26-SJC')])
2025-08-13 16:24:00,142 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:24:00,142 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:24:00,183 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:24:00,183 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:24:00,192 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:24:00,192 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:24:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebf6a25c1ceb26-SJC'})
2025-08-13 16:24:00,192 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:24:00,216 - llm_agent - INFO - Classified message: get_weather
2025-08-13 16:24:00,224 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-b9be98ea-0ee4-446d-838d-96f64d0f0b58', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002564BB6AF20>, 'json_data': {'messages': [{'content': 'Set the longitude and latitude from the user query (i.e. "weather in San Diego" -> lat: 32.7157, lon: -117.1611)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where is the weather like in Seattle?' additional_kwargs={} response_metadata={} id='e473754e-22f8-41fa-868c-ceafa12edb45'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 16:24:00,224 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:24:00,224 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:24:00,224 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:24:00,224 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:24:00,224 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:24:00,232 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:24:00,636 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:24:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebf6a5bfe4eb26-SJC')])
2025-08-13 16:24:00,639 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:24:00,639 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:24:00,914 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:24:00,914 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:24:00,914 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:24:00,918 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:24:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebf6a5bfe4eb26-SJC'})
2025-08-13 16:24:00,918 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:24:01,078 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-2108b9e6-cd43-4671-997e-09c47f88f328', 'json_data': {'messages': [{'content': "You are a SoCal ABG, Integrate ONLY this result into your response: {'coord': {'lon': -118.2439, 'lat': 34.0526}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'base': 'stations', 'main': {'temp': 77.83, 'feels_like': 78.4, 'temp_min': 69.89, 'temp_max': 85.89, 'pressure': 1012, 'humidity': 66, 'sea_level': 1012, 'grnd_level': 992}, 'visibility': 10000, 'wind': {'speed': 13.8, 'deg': 190}, 'clouds': {'all': 0}, 'dt': 1755127405, 'sys': {'type': 2, 'id': 2075946, 'country': 'US', 'sunrise': 1755090802, 'sunset': 1755139343}, 'timezone': -25200, 'id': 5368361, 'name': 'Los Angeles', 'cod': 200}", 'role': 'system'}], 'model': 'gpt-4o-mini', 'stream': False}}
2025-08-13 16:24:01,078 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:24:01,078 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:24:01,078 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:24:01,078 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:24:01,085 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:24:01,085 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:24:01,432 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:24:01 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebf6ab0a04eb26-SJC')])
2025-08-13 16:24:01,432 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:24:01,432 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:24:03,587 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:24:03,587 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:24:03,587 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:24:03,594 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:24:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebf6ab0a04eb26-SJC'})
2025-08-13 16:24:03,595 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:24:55,570 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:24:55,570 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:24:55,623 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:25:03,784 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-c71d38c2-4883-414b-a3c7-050ff252d056', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000196FB2D9440>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where is the weather like in Seattle?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 16:25:03,875 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:25:03,875 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 16:25:03,899 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000196FB2FCFE0>
2025-08-13 16:25:03,901 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000196F9CA54D0> server_hostname='openrouter.ai' timeout=None
2025-08-13 16:25:03,929 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000196FB2FCBC0>
2025-08-13 16:25:03,929 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:25:03,929 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:25:03,931 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:25:03,931 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:25:03,931 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:25:04,384 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:25:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebf833dc18ed3b-SJC')])
2025-08-13 16:25:04,390 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:25:04,390 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:25:04,412 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:25:04,412 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:25:04,413 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:25:04,413 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:25:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebf833dc18ed3b-SJC'})
2025-08-13 16:25:04,413 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:25:04,421 - llm_agent - INFO - Classified message: get_weather
2025-08-13 16:25:04,429 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-9f5023c2-f926-4d9b-8ccd-114374754433', 'post_parser': <function Completions.parse.<locals>.parser at 0x00000196FB2D9440>, 'json_data': {'messages': [{'content': 'Set the longitude and latitude from the user query (i.e. "weather in San Diego" -> lat: 32.7157, lon: -117.1611)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where is the weather like in Seattle?' additional_kwargs={} response_metadata={} id='ee7b0e08-5bda-4c6a-8f9f-1e72f0b4d435'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 16:25:04,429 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:25:04,429 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:25:04,429 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:25:04,429 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:25:04,435 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:25:04,435 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:25:05,123 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:25:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebf836fff3ed3b-SJC')])
2025-08-13 16:25:05,125 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:25:05,125 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:25:05,423 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:25:05,423 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:25:05,423 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:25:05,423 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:25:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebf836fff3ed3b-SJC'})
2025-08-13 16:25:05,423 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:25:05,568 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-8ae9aa41-0b93-4b16-b2bd-9e7079285893', 'json_data': {'messages': [{'content': "You are a ABG, Integrate ONLY this result into your response: {'coord': {'lon': -118.2439, 'lat': 34.0526}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'base': 'stations', 'main': {'temp': 77.83, 'feels_like': 78.4, 'temp_min': 69.89, 'temp_max': 85.89, 'pressure': 1012, 'humidity': 66, 'sea_level': 1012, 'grnd_level': 992}, 'visibility': 10000, 'wind': {'speed': 13.8, 'deg': 190}, 'clouds': {'all': 0}, 'dt': 1755127405, 'sys': {'type': 2, 'id': 2075946, 'country': 'US', 'sunrise': 1755090802, 'sunset': 1755139343}, 'timezone': -25200, 'id': 5368361, 'name': 'Los Angeles', 'cod': 200}", 'role': 'system'}], 'model': 'gpt-4o-mini', 'stream': False}}
2025-08-13 16:25:05,570 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:25:05,570 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:25:05,570 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:25:05,570 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:25:05,570 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:25:05,570 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:25:06,094 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:25:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebf83e19daed3b-SJC')])
2025-08-13 16:25:06,096 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:25:06,096 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:25:07,106 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:25:07,106 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:25:07,106 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:25:07,110 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:25:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebf83e19daed3b-SJC'})
2025-08-13 16:25:07,110 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:25:07,110 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where is the weather like in Seattle?', additional_kwargs={}, response_metadata={}, id='ee7b0e08-5bda-4c6a-8f9f-1e72f0b4d435')], 'message_type': 'get_weather', 'result': {'llm_response': AIMessage(content='The current weather in Los Angeles is clear with a temperature of approximately 77.8F, feeling slightly warmer at 78.4F. The humidity is around 66%, and there is a light wind blowing at a speed of 13.8 mph coming from the south-southwest. The visibility is excellent at 10 kilometers, and there are no clouds in the sky.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 78, 'prompt_tokens': 261, 'total_tokens': 339, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': 0, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}}, 'model_name': 'openai/gpt-4o-mini', 'system_fingerprint': 'fp_34a54ae93c', 'id': 'gen-1755127505-kvEAnNsCZwc25UEgy4zB', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--bdac8974-6664-464e-96d6-e01481efc0eb-0', usage_metadata={'input_tokens': 261, 'output_tokens': 78, 'total_tokens': 339, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 0}})}, 'extracted_params': {'lat': 47.6062, 'lon': -122.3321, 'genres': None, 'postal_code': None}}
2025-08-13 16:25:46,802 - pinecone.utils.plugin_aware - DEBUG - __getattr__ called for __pydantic_decorators__
2025-08-13 16:25:46,802 - pinecone.utils.plugin_aware - DEBUG - Loading plugins for Index
2025-08-13 16:25:46,856 - pinecone.utils.plugin_aware - DEBUG - Plugins loaded successfully for Index
2025-08-13 16:27:20,994 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-9a087592-b934-4480-a79c-800e45cc79d9', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002509ADD9440>, 'json_data': {'messages': [{'content': "You are a message classifier. Analyze the user's message and classify it into one of the specified types.", 'role': 'system'}, {'content': 'Where is the weather like in Seattle?', 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'message_type': {'description': 'The type of message the user is sending', 'enum': ['default_llm_response', 'song_rec', 'get_concerts', 'get_weather'], 'title': 'Message Type', 'type': 'string'}}, 'required': ['message_type'], 'title': 'MessageClassifier', 'type': 'object', 'additionalProperties': False}, 'name': 'MessageClassifier', 'strict': True}}, 'stream': False}}
2025-08-13 16:27:21,198 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:27:21,198 - httpcore.connection - DEBUG - connect_tcp.started host='openrouter.ai' port=443 local_address=None timeout=None socket_options=None
2025-08-13 16:27:21,231 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002509ADFCFE0>
2025-08-13 16:27:21,231 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002509A7A1550> server_hostname='openrouter.ai' timeout=None
2025-08-13 16:27:21,263 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002509A99C6E0>
2025-08-13 16:27:21,263 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:27:21,263 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:27:21,271 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:27:21,271 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:27:21,271 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:27:21,992 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:27:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebfb8e3dc8cb9b-LAX')])
2025-08-13 16:27:21,992 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:27:21,994 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:27:22,041 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:27:22,041 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:27:22,041 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:27:22,041 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:27:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebfb8e3dc8cb9b-LAX'})
2025-08-13 16:27:22,041 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:27:22,058 - llm_agent - INFO - Classified message: get_weather
2025-08-13 16:27:22,066 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'chat.completions.parse'}, 'files': None, 'idempotency_key': 'stainless-python-retry-df8016b3-3ff8-4283-8787-d73ac767ec22', 'post_parser': <function Completions.parse.<locals>.parser at 0x000002509ADD9440>, 'json_data': {'messages': [{'content': 'Set the longitude and latitude from the user query (i.e. "weather in San Diego" -> lat: 32.7157, lon: -117.1611)', 'role': 'system'}, {'content': "Extract parameters from this query: content='Where is the weather like in Seattle?' additional_kwargs={} response_metadata={} id='846a7bf0-1b01-4916-8e3d-0c4cf0394fac'", 'role': 'user'}], 'model': 'gpt-4.1-nano', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'lat': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted latitude from the query', 'title': 'Lat'}, 'lon': {'anyOf': [{'type': 'number'}, {'type': 'null'}], 'description': 'Extracted longitude from the query', 'title': 'Lon'}, 'genres': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'description': 'Extracted genres from the query', 'title': 'Genres'}, 'postal_code': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Extracted postal code from the query', 'title': 'Postal Code'}}, 'title': 'ExtractedParams', 'type': 'object', 'additionalProperties': False, 'required': ['lat', 'lon', 'genres', 'postal_code']}, 'name': 'ExtractedParams', 'strict': True}}, 'stream': False}}
2025-08-13 16:27:22,066 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:27:22,066 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:27:22,066 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:27:22,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:27:22,066 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:27:22,066 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:27:22,482 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:27:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebfb933bbecb9b-LAX')])
2025-08-13 16:27:22,482 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:27:22,482 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:27:22,591 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:27:22,591 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:27:22,591 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:27:22,591 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:27:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebfb933bbecb9b-LAX'})
2025-08-13 16:27:22,591 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:27:22,729 - root - INFO - [INTEGRATING RESULT] output: {'coord': {'lon': -118.2439, 'lat': 34.0526}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'base': 'stations', 'main': {'temp': 77.83, 'feels_like': 78.4, 'temp_min': 69.89, 'temp_max': 85.89, 'pressure': 1012, 'humidity': 66, 'sea_level': 1012, 'grnd_level': 992}, 'visibility': 10000, 'wind': {'speed': 13.8, 'deg': 190}, 'clouds': {'all': 0}, 'dt': 1755127405, 'sys': {'type': 2, 'id': 2075946, 'country': 'US', 'sunrise': 1755090802, 'sunset': 1755139343}, 'timezone': -25200, 'id': 5368361, 'name': 'Los Angeles', 'cod': 200}
2025-08-13 16:27:22,729 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-808c9900-bdaa-4570-a92d-0fba9daf263a', 'json_data': {'messages': [{'content': "You are a ABG, Integrate ONLY this result into your response: {'coord': {'lon': -118.2439, 'lat': 34.0526}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'base': 'stations', 'main': {'temp': 77.83, 'feels_like': 78.4, 'temp_min': 69.89, 'temp_max': 85.89, 'pressure': 1012, 'humidity': 66, 'sea_level': 1012, 'grnd_level': 992}, 'visibility': 10000, 'wind': {'speed': 13.8, 'deg': 190}, 'clouds': {'all': 0}, 'dt': 1755127405, 'sys': {'type': 2, 'id': 2075946, 'country': 'US', 'sunrise': 1755090802, 'sunset': 1755139343}, 'timezone': -25200, 'id': 5368361, 'name': 'Los Angeles', 'cod': 200}", 'role': 'system'}], 'model': 'gpt-4o-mini', 'stream': False}}
2025-08-13 16:27:22,729 - openai._base_client - DEBUG - Sending HTTP Request: POST https://openrouter.ai/api/v1/chat/completions
2025-08-13 16:27:22,729 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-13 16:27:22,737 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-13 16:27:22,738 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-13 16:27:22,738 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-13 16:27:22,738 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-13 16:27:23,300 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 13 Aug 2025 23:27:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'Access-Control-Allow-Origin', b'*'), (b'Vary', b'Accept-Encoding'), (b'Permissions-Policy', b'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")'), (b'Referrer-Policy', b'no-referrer, strict-origin-when-cross-origin'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96ebfb976ec6cb9b-LAX')])
2025-08-13 16:27:23,300 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-13 16:27:23,300 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-13 16:27:24,571 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-13 16:27:24,571 - httpcore.http11 - DEBUG - response_closed.started
2025-08-13 16:27:24,579 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-13 16:27:24,579 - openai._base_client - DEBUG - HTTP Response: POST https://openrouter.ai/api/v1/chat/completions "200 OK" Headers({'date': 'Wed, 13 Aug 2025 23:27:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'access-control-allow-origin': '*', 'vary': 'Accept-Encoding', 'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")', 'referrer-policy': 'no-referrer, strict-origin-when-cross-origin', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96ebfb976ec6cb9b-LAX'})
2025-08-13 16:27:24,579 - openai._base_client - DEBUG - request_id: None
2025-08-13 16:27:24,579 - root - INFO - [FINAL RESULT]: {'messages': [HumanMessage(content='Where is the weather like in Seattle?', additional_kwargs={}, response_metadata={}, id='846a7bf0-1b01-4916-8e3d-0c4cf0394fac')], 'message_type': 'get_weather', 'result': {'llm_response': AIMessage(content='The current weather in Los Angeles shows a clear sky with a temperature of 77.83F, feeling like 78.4F. The humidity level is at 66%, with wind speeds of 13.8 mph coming from the south-southwest (190). The visibility is good at 10,000 meters, and there are no clouds in the sky.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 76, 'prompt_tokens': 261, 'total_tokens': 337, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': 0, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}}, 'model_name': 'openai/gpt-4o-mini', 'system_fingerprint': 'fp_34a54ae93c', 'id': 'gen-1755127642-MWo4JdCBdQ3uN62VzuE7', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--e6f0bf47-7cf0-4321-afd0-10805db661f1-0', usage_metadata={'input_tokens': 261, 'output_tokens': 76, 'total_tokens': 337, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 0}})}, 'extracted_params': {'lat': 47.6062, 'lon': -122.3321, 'genres': None, 'postal_code': None}}
